# üìã –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ Telegram

## üéØ –ß—Ç–æ –º–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å

–ò–∑ —Å–æ–æ–±—â–µ–Ω–∏–π –±–æ—Ç–∞ –≤ –∏—Å—Ç–æ—Ä–∏–∏ Telegram –º–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:
- ‚úÖ –ù–æ–º–µ—Ä –∑–∞—è–≤–∫–∏
- ‚úÖ –¢–∏–ø —Ç–µ—Ö–Ω–∏–∫–∏
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞ (–∏–º—è, –∞–¥—Ä–µ—Å, —Ç–µ–ª–µ—Ñ–æ–Ω)
- ‚úÖ –°—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏
- ‚úÖ –ù–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –º–∞—Å—Ç–µ—Ä
- ‚úÖ –î–∞—Ç—É —Å–æ–∑–¥–∞–Ω–∏—è

---

## üì• –°–ø–æ—Å–æ–± 1: –≠–∫—Å–ø–æ—Ä—Ç –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –î–ª—è Telegram Desktop:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ —á–∞—Ç —Å –±–æ—Ç–æ–º**
2. **–ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Ç—Ä–∏ —Ç–æ—á–∫–∏ (‚ãÆ)** ‚Üí "Export chat history"
3. **–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç:**
   - **JSON** - –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
   - **HTML** - –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
   - –ü–µ—Ä–∏–æ–¥: –≤—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–µ –¥–∞—Ç—ã
   - –¢–∏–ø—ã —Ñ–∞–π–ª–æ–≤: –º–æ–∂–Ω–æ —Å–Ω—è—Ç—å –≤—Å–µ –≥–∞–ª–æ—á–∫–∏ (–Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏—è)
5. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª**

### –ü—Ä–∏–º–µ—Ä —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ JSON:

```json
{
  "messages": [
    {
      "id": 123,
      "type": "message",
      "date": "2025-10-20T14:30:00",
      "from": "Bot Name",
      "text": "üìã –ó–∞—è–≤–∫–∞ #45\n\nüîß –•–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫\nüìù –ù–µ –º–æ—Ä–æ–∑–∏—Ç\n\nüë§ –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤\nüìç —É–ª. –ü—É—à–∫–∏–Ω–∞, 10\nüìû +79123456789"
    }
  ]
}
```

---

## ‚úçÔ∏è –°–ø–æ—Å–æ–± 2: –†—É—á–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

–ï—Å–ª–∏ –∑–∞—è–≤–æ–∫ –Ω–µ–º–Ω–æ–≥–æ, –º–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏—Ö –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç.

### –®–∞–≥ 1: –ù–∞–π–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –∑–∞—è–≤–∫–∞—Ö

–ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å—Ç–æ—Ä–∏—é –ø–µ—Ä–µ–ø–∏—Å–∫–∏ —Å –±–æ—Ç–æ–º –∏ –≤—ã–ø–∏—à–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ:

```
–ó–∞—è–≤–∫–∞ #45
–¢–∏–ø: –•–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫
–û–ø–∏—Å–∞–Ω–∏–µ: –ù–µ –º–æ—Ä–æ–∑–∏—Ç
–ö–ª–∏–µ–Ω—Ç: –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤
–ê–¥—Ä–µ—Å: —É–ª. –ü—É—à–∫–∏–Ω–∞, –¥. 10, –∫–≤. 5
–¢–µ–ª–µ—Ñ–æ–Ω: +79123456789
–î–∞—Ç–∞: 20.10.2025 14:30
```

### –®–∞–≥ 2: –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
nano scripts/restore_order_manually.py
```

–†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ:

```python
await restore_order(
    equipment_type="–•–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫",
    description="–ù–µ –º–æ—Ä–æ–∑–∏—Ç",
    client_name="–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
    client_address="—É–ª. –ü—É—à–∫–∏–Ω–∞, –¥. 10, –∫–≤. 5",
    client_phone="+79123456789",
    dispatcher_id=123456789,  # ‚Üê –í–ê–®–ò Telegram ID
    created_at="2025-10-20 14:30:00",
)
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
docker exec telegram_repair_bot_prod python /app/scripts/restore_order_manually.py
```

---

## ü§ñ –°–ø–æ—Å–æ–± 3: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ (–¥–ª—è –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞—è–≤–æ–∫)

–ï—Å–ª–∏ —É –≤–∞—Å –º–Ω–æ–≥–æ –∑–∞—è–≤–æ–∫, —è –º–æ–≥—É —Å–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ JSON/HTML —Ñ–∞–π–ª–∞.

### –ß—Ç–æ –Ω—É–∂–Ω–æ:

1. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞ –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
2. –ü–æ–∫–∞–∂–∏—Ç–µ –º–Ω–µ –ø—Ä–∏–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –±–æ—Ç–∞
3. –Ø —Å–æ–∑–¥–∞–º —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞

---

## üìù –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –±–æ—Ç–∞

–û–±—ã—á–Ω–æ –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ç–∞–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ:

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–æ–≤–æ–π –∑–∞—è–≤–∫–µ:

```
üìã –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ #123

üîß –¢–∏–ø —Ç–µ—Ö–Ω–∏–∫–∏: –•–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫
üìù –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ –º–æ—Ä–æ–∑–∏—Ç

üë§ –ö–ª–∏–µ–Ω—Ç: –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤
üìç –ê–¥—Ä–µ—Å: —É–ª. –ü—É—à–∫–∏–Ω–∞, –¥. 10, –∫–≤. 5
üìû –¢–µ–ª–µ—Ñ–æ–Ω: +79123456789

üìÖ –°–æ–∑–¥–∞–Ω–∞: 20.10.2025 14:30
```

### –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞—è–≤–∫–µ:

```
üìã –ó–∞—è–≤–∫–∞ #123

üìä –°—Ç–∞—Ç—É—Å: üÜï –ù–æ–≤–∞—è
üîß –¢–∏–ø —Ç–µ—Ö–Ω–∏–∫–∏: –•–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫
üìù –û–ø–∏—Å–∞–Ω–∏–µ: –ù–µ –º–æ—Ä–æ–∑–∏—Ç

üë§ –ö–ª–∏–µ–Ω—Ç: –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤
üìç –ê–¥—Ä–µ—Å: —É–ª. –ü—É—à–∫–∏–Ω–∞, –¥. 10, –∫–≤. 5
üìû –¢–µ–ª–µ—Ñ–æ–Ω: +79123456789

üë®‚Äçüîß –ú–∞—Å—Ç–µ—Ä: –ò–≤–∞–Ω –ú–∞—Å—Ç–µ—Ä–æ–≤
üìÖ –°–æ–∑–¥–∞–Ω–∞: 20.10.2025 14:30
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ!

1. **Telegram ID –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å, –∫—Ç–æ —Å–æ–∑–¥–∞–ª –∑–∞—è–≤–∫—É
   - –£–∑–Ω–∞—Ç—å –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ –±–æ—Ç–∞: –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –±–æ—Ç—É –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤ –ª–æ–≥–∞—Ö
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ID –∏–∑ `DISPATCHER_IDS` –≤ `env.production`

2. **–§–æ—Ä–º–∞—Ç –¥–∞—Ç—ã** - `YYYY-MM-DD HH:MM:SS`
   - –ü—Ä–∏–º–µ—Ä: `2025-10-20 14:30:00`

3. **–ù–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤** - –≤ —Ñ–æ—Ä–º–∞—Ç–µ `+7XXXXXXXXXX`

4. **–°—Ç–∞—Ç—É—Å—ã –∑–∞—è–≤–æ–∫** - –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∫–∞–∫ NEW (–Ω–æ–≤—ã–µ), –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤—Ä—É—á–Ω—É—é

---

## üîç –ü–æ–ª–µ–∑–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∑–∞—è–≤–∫–∏:

```bash
docker exec telegram_repair_bot_prod sqlite3 /app/data/bot_database.db "SELECT id, equipment_type, client_name, status, created_at FROM orders ORDER BY created_at DESC LIMIT 10;"
```

### –£–¥–∞–ª–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞—è–≤–∫—É (–µ—Å–ª–∏ –æ—à–∏–±–ª–∏—Å—å):

```bash
docker exec telegram_repair_bot_prod sqlite3 /app/data/bot_database.db "DELETE FROM orders WHERE id = 123;"
```

### –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏:

```bash
docker exec telegram_repair_bot_prod sqlite3 /app/data/bot_database.db "UPDATE orders SET status = 'COMPLETED' WHERE id = 123;"
```

---

## üìû –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?

–ï—Å–ª–∏ —É –≤–∞—Å –º–Ω–æ–≥–æ –∑–∞—è–≤–æ–∫ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:

1. **–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞** –≤ JSON
2. **–ü–æ–∫–∞–∂–∏—Ç–µ –º–Ω–µ –ø—Ä–∏–º–µ—Ä 2-3 —Å–æ–æ–±—â–µ–Ω–∏–π** –æ—Ç –±–æ—Ç–∞
3. **–Ø —Å–æ–∑–¥–∞–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–µ—Ä**, –∫–æ—Ç–æ—Ä—ã–π –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤—Å–µ –∑–∞—è–≤–∫–∏ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π!

---

**–£–¥–∞—á–∏ —Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö! üöÄ**
