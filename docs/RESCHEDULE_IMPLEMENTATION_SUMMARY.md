# –ò—Ç–æ–≥–æ–≤–æ–µ —Ä–µ–∑—é–º–µ: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –ø–µ—Ä–µ–Ω–æ—Å–∞ –∑–∞—è–≤–æ–∫

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –º–æ–¥–µ–ª–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –≤ –º–æ–¥–µ–ª—å `Order`:
  - `rescheduled_count` (int) - —Å—á–µ—Ç—á–∏–∫ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤
  - `last_rescheduled_at` (datetime) - –¥–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–µ—Ä–µ–Ω–æ—Å–∞
  - `reschedule_reason` (string) - –ø—Ä–∏—á–∏–Ω–∞ –ø–µ—Ä–µ–Ω–æ—Å–∞
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è `005_add_reschedule_fields.py`
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –∫ –ë–î

### 2. FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `RescheduleOrderStates` —Å —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏:
  - `enter_new_time` - –≤–≤–æ–¥ –Ω–æ–≤–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
  - `enter_reason` - –≤–≤–æ–¥ –ø—Ä–∏—á–∏–Ω—ã –ø–µ—Ä–µ–Ω–æ—Å–∞

### 3. –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "üìÖ –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤–∏–∑–∏—Ç" –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤:
  - –õ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –º–∞—Å—Ç–µ—Ä–∞ (–¥–ª—è ASSIGNED –∏ ACCEPTED)
  - –ì—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç (–¥–ª—è ASSIGNED –∏ ACCEPTED)
  - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–¥–ª—è ASSIGNED –∏ ACCEPTED)

### 4. –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
- ‚úÖ `app/handlers/master.py`:
  - `callback_reschedule_order` - –Ω–∞—á–∞–ª–æ –ø–µ—Ä–µ–Ω–æ—Å–∞
  - `process_reschedule_new_time` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
  - `process_reschedule_reason` - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–µ—Ä–µ–Ω–æ—Å–∞
- ‚úÖ `app/handlers/group_interaction.py`:
  - `callback_group_reschedule_order` - –ø–µ—Ä–µ–Ω–æ—Å –≤ –≥—Ä—É–ø–ø–µ

### 5. –£–º–Ω—ã–π SLA
- ‚úÖ `app/services/scheduler.py` –æ–±–Ω–æ–≤–ª–µ–Ω:
  - SLA –¥–ª—è ACCEPTED —É–≤–µ–ª–∏—á–µ–Ω —Å 8 –¥–æ 16 —á–∞—Å–æ–≤ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–Ω–æ—Å–∞
  - –ü–æ—Ä–æ–≥ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π —Å 15 –¥–æ 30 –º–∏–Ω—É—Ç –¥–ª—è –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—ã—Ö –∑–∞—è–≤–æ–∫
  - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –Ω–∞–∑–æ–π–ª–∏–≤—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### 6. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞ –ø—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ:
  - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞—è–≤–∫–µ –∏ –∫–ª–∏–µ–Ω—Ç–µ
  - –°—Ç–∞—Ä–æ–µ –∏ –Ω–æ–≤–æ–µ –≤—Ä–µ–º—è
  - –ü—Ä–∏—á–∏–Ω–∞ –ø–µ—Ä–µ–Ω–æ—Å–∞
  - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è —Å–≤—è–∑–∞—Ç—å—Å—è —Å –∫–ª–∏–µ–Ω—Ç–æ–º
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –º–∞—Å—Ç–µ—Ä—É –æ —É—Å–ø–µ—à–Ω–æ–º –ø–µ—Ä–µ–Ω–æ—Å–µ

### 7. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ `docs/ORDER_RESCHEDULE_GUIDE.md` - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- ‚úÖ `docs/SUMMARY_ORDER_RESCHEDULE.md` - –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
- ‚úÖ `CHANGELOG.md` - –æ–±–Ω–æ–≤–ª–µ–Ω —Å –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π v1.4.0

### 8. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ó–∞–ø—É—â–µ–Ω—ã —Ç–µ—Å—Ç—ã: 78/79 –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ö–æ–¥ –ø—Ä–æ–≤–µ—Ä–µ–Ω –ª–∏–Ω—Ç–µ—Ä–æ–º: –æ—à–∏–±–æ–∫ –Ω–µ—Ç

## üìã –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. `app/states.py` - FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è
2. `app/database/models.py` - –º–æ–¥–µ–ª—å Order
3. `app/handlers/master.py` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–µ—Ä–µ–Ω–æ—Å–∞
4. `app/handlers/group_interaction.py` - –≥—Ä—É–ø–ø–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
5. `app/keyboards/inline.py` - –∫–Ω–æ–ø–∫–∏
6. `app/services/scheduler.py` - —É–º–Ω—ã–π SLA
7. `migrations/versions/005_add_reschedule_fields.py` - –º–∏–≥—Ä–∞—Ü–∏—è –ë–î
8. `CHANGELOG.md` - –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
9. `docs/ORDER_RESCHEDULE_GUIDE.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
10. `docs/SUMMARY_ORDER_RESCHEDULE.md` - –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
11. `docs/RESCHEDULE_IMPLEMENTATION_SUMMARY.md` - —ç—Ç–æ —Ä–µ–∑—é–º–µ

## üéØ –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ö–æ—Ä–æ—Ç–∫–∏–µ –∏ –ø–æ–Ω—è—Ç–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- –ì–∏–±–∫–∏–π —Ñ–æ—Ä–º–∞—Ç –≤–≤–æ–¥–∞ –≤—Ä–µ–º–µ–Ω–∏ (–∑–∞–≤—Ç—Ä–∞ 14:00, —á–µ—Ä–µ–∑ 2 —á–∞—Å–∞ –∏ —Ç.–¥.)
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –ø–µ—Ä–µ–Ω–æ—Å–∞

### –£–º–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤—Å–µ–º –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω–Ω—ã–º
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π SLA - –Ω–µ –Ω–∞–¥–æ–µ–¥–∞–µ—Ç –ø–æ—Å–ª–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–Ω–æ—Å–æ–≤
- –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –¢–æ–ª—å–∫–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –º–∞—Å—Ç–µ—Ä –∏–ª–∏ –∞–¥–º–∏–Ω –º–æ–∂–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å
- –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ audit log
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–Ω–æ—Å–æ–º

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–æ**: ~400+
- **–§–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ**: 11
- **–ù–æ–≤—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤**: 4
- **–ù–æ–≤—ã—Ö –ø–æ–ª–µ–π –ë–î**: 3
- **–¢–µ—Å—Ç—ã**: 78/79 —É—Å–ø–µ—à–Ω–æ (99%)

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω.
–ú–æ–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

1. **–î–ª—è –º–∞—Å—Ç–µ—Ä–æ–≤**: –í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –ø—Ä–∏—á–∏–Ω—É - —ç—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –¥–∏—Å–ø–µ—Ç—á–µ—Ä—É
2. **–î–ª—è –¥–∏—Å–ø–µ—Ç—á–µ—Ä–æ–≤**: –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–π—Ç–µ —Å –∫–ª–∏–µ–Ω—Ç–æ–º
3. **–î–ª—è –∞–¥–º–∏–Ω–æ–≤**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —á–∞—Å—Ç–æ—Ç—É –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —á–µ—Ä–µ–∑ audit log

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä
2. –û–±—É—á–∏—Ç—å –º–∞—Å—Ç–µ—Ä–æ–≤ –Ω–æ–≤–æ–º—É —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—É
3. –ü—Ä–æ–∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –¥–∏—Å–ø–µ—Ç—á–µ—Ä–æ–≤ –æ –Ω–æ–≤—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö
4. –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–≤—ã–µ –¥–Ω–∏

---

**–î–∞—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**: 16 –æ–∫—Ç—è–±—Ä—è 2025
**–í–µ—Ä—Å–∏—è**: v1.4.0 (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
