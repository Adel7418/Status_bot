# üîß Troubleshooting - –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

–≠—Ç–∞ –ø–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –ø–æ —Ä–µ—à–µ–Ω–∏—é —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º —Å –±–æ—Ç–æ–º.

---

## üìö –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞

### üîÑ –ü—Ä–æ–±–ª–µ–º—ã —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º

- **[–û–ë–ù–û–í–õ–ï–ù–ò–ï_–ë–û–¢–ê_–ö–†–ê–¢–ö–û.md](–û–ë–ù–û–í–õ–ï–ù–ò–ï_–ë–û–¢–ê_–ö–†–ê–¢–ö–û.md)** - –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è (–Ω–∞—á–Ω–∏—Ç–µ –∑–¥–µ—Å—å!)
  - –ë—ã—Å—Ç—Ä—ã–µ —Ä–µ—à–µ–Ω–∏—è
  - –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
  - –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

- **[BOT_UPDATE_ISSUES.md](BOT_UPDATE_ISSUES.md)** - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
  - 10 –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø—Ä–∏—á–∏–Ω
  - –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
  - –ü–æ—à–∞–≥–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è
  - –°–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ë–æ—Ç –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ?

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh user@–≤–∞—à_IP

# –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
cd ~/telegram_repair_bot
bash scripts/update_bot.sh
```

### –ù—É–∂–Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞?

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–æ–ª–Ω—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É
bash scripts/diagnose_update.sh
```

---

## üìñ –î—Ä—É–≥–∏–µ –ø–æ–ª–µ–∑–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

### –î–µ–ø–ª–æ–π –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞
- [DEPLOY_VPS_LINUX_GUIDE.md](../deployment/DEPLOY_VPS_LINUX_GUIDE.md) - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–µ–ø–ª–æ—é
- [QUICK_DEPLOY_COMMANDS.md](../deployment/QUICK_DEPLOY_COMMANDS.md) - –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã
- [INSTALLATION.md](../INSTALLATION.md) - –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- [DOCKER_USAGE.md](../DOCKER_USAGE.md) - –†–∞–±–æ—Ç–∞ —Å Docker
- [DATABASE_USAGE_GUIDE.md](../DATABASE_USAGE_GUIDE.md) - –†–∞–±–æ—Ç–∞ —Å –ë–î
- [TROUBLESHOOTING.md](../TROUBLESHOOTING.md) - –û–±—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- [CONTRIBUTING.md](../CONTRIBUTING.md) - –£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- [development/](../development/) - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

---

## üõ†Ô∏è –ü–æ–ª–µ–∑–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

–í –ø–∞–ø–∫–µ `scripts/` –¥–æ—Å—Ç—É–ø–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫—Ä–∏–ø—Ç—ã:

- **update_bot.sh** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞
- **diagnose_update.sh** - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **backup_db.py** - –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î
- **deploy_to_vps.sh** - –î–µ–ø–ª–æ–π –Ω–∞ VPS

---

## üÜò –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### Q: –ë–æ—Ç –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ git pull

**A:** –ù—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å Docker –æ–±—Ä–∞–∑:
```bash
docker compose -f docker/docker-compose.prod.yml build --no-cache
docker compose -f docker/docker-compose.prod.yml up -d
```

### Q: –ö–∞–∫ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏?

**A:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ backup –ë–î –∏ –æ—Ç–∫–∞—Ç Git:
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker compose -f docker/docker-compose.prod.yml down

# –û—Ç–∫–∞—Ç –∫–æ–¥–∞
git log --oneline  # –ù–∞–π–¥–∏—Ç–µ –Ω—É–∂–Ω—ã–π –∫–æ–º–º–∏—Ç
git checkout <commit-hash>

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î
cp backups/bot_database_<timestamp>.db data/bot_database.db

# –ó–∞–ø—É—Å–∫
docker compose -f docker/docker-compose.prod.yml build --no-cache
docker compose -f docker/docker-compose.prod.yml up -d
```

### Q: Database locked –æ—à–∏–±–∫–∞

**A:** –£–¥–∞–ª–∏—Ç–µ lock-—Ñ–∞–π–ª—ã:
```bash
docker compose -f docker/docker-compose.prod.yml down
rm -f data/bot_database.db-journal
rm -f data/bot_database.db-shm
rm -f data/bot_database.db-wal
docker compose -f docker/docker-compose.prod.yml up -d
```

### Q: –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ?

**A:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç:
```bash
cd ~/telegram_repair_bot
git log -1 --oneline
```

### Q: Systemd —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é

**A:** –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–∏—Å –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º:
```bash
sudo systemctl stop telegram-bot
# –û–±–Ω–æ–≤–ª—è–π—Ç–µ –±–æ—Ç–∞
sudo systemctl start telegram-bot
```

---

## üìù –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤

–ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏–π:

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π MD —Ñ–∞–π–ª –≤ —ç—Ç–æ–π –ø–∞–ø–∫–µ
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–Ω—è—Ç–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
3. –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥
4. –û–±–Ω–æ–≤–∏—Ç–µ —ç—Ç–æ—Ç README
5. –£–∫–∞–∂–∏—Ç–µ –¥–∞—Ç—É –∏ –≤–µ—Ä—Å–∏—é

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è aiogram](https://docs.aiogram.dev/)
- [Docker –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.docker.com/)
- [SQLite –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://www.sqlite.org/docs.html)
- [Python Alembic](https://alembic.sqlalchemy.org/)

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 15 –æ–∫—Ç—è–±—Ä—è 2025
**–ü–æ–¥–¥–µ—Ä–∂–∫–∞:** –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
