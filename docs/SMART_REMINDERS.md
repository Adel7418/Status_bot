# –£–º–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –¥–ª—è –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—ã—Ö –∑–∞—è–≤–æ–∫

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

–ö–æ–≥–¥–∞ –º–∞—Å—Ç–µ—Ä –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç –∑–∞—è–≤–∫—É –∏ —É–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –≤—Ä–µ–º—è –≤–∏–∑–∏—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–∑–∞–≤—Ç—Ä–∞ 14:00"), —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. **–ü–∞—Ä—Å–∏—Ç –≤—Ä–µ–º—è** –∏–∑ –ø–æ–ª—è `scheduled_time`
2. **–í—ã—á–∏—Å–ª—è–µ—Ç** —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –≤–∏–∑–∏—Ç–∞ —Å —É—á–µ—Ç–æ–º –¥–∞—Ç—ã
3. **–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ** –º–∞—Å—Ç–µ—Ä—É **–∑–∞ 2 —á–∞—Å–∞** –¥–æ –≤–∏–∑–∏—Ç–∞
4. **–û—Ç–∫–ª—é—á–∞–µ—Ç** —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ SLA-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è —ç—Ç–æ–π –∑–∞—è–≤–∫–∏

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –≤—Ä–µ–º–µ–Ω–∏

### –° –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º:
- `–∑–∞–≤—Ç—Ä–∞ 14:00`
- `—Å–µ–≥–æ–¥–Ω—è 18:00`
- `–ø–æ—Å–ª–µ–∑–∞–≤—Ç—Ä–∞ 10:30`
- `17.10.2025 15:00`
- `—á–µ—Ä–µ–∑ 2 –¥–Ω—è 12:00`

### –ë–µ–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏:
- `–∑–∞–≤—Ç—Ä–∞ —É—Ç—Ä–æ–º` - –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π SLA (30 –º–∏–Ω)
- `—á–µ—Ä–µ–∑ –Ω–µ–¥–µ–ª—é` - –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π SLA (30 –º–∏–Ω)
- `–ø–æ–∑–∂–µ` - –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π SLA (30 –º–∏–Ω)

## –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã

### –°—Ü–µ–Ω–∞—Ä–∏–π:
1. –°–µ–π—á–∞—Å: **16 –æ–∫—Ç—è–±—Ä—è, 12:00**
2. –ú–∞—Å—Ç–µ—Ä –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç –∑–∞—è–≤–∫—É –Ω–∞ **–∑–∞–≤—Ç—Ä–∞ 14:00**
3. –°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç: –≤–∏–∑–∏—Ç **17 –æ–∫—Ç—è–±—Ä—è –≤ 14:00**
4. –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—Å—è: **17 –æ–∫—Ç—è–±—Ä—è –≤ 12:00** (–∑–∞ 2 —á–∞—Å–∞)

### –ß—Ç–æ –ø–æ–ª—É—á–∏—Ç –º–∞—Å—Ç–µ—Ä –≤ 12:00:
```
‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –≤–∏–∑–∏—Ç–µ —á–µ—Ä–µ–∑ 2 —á–∞—Å–∞!

üìã –ó–∞—è–≤–∫–∞ #123
üîß –•–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫
üë§ –ö–ª–∏–µ–Ω—Ç: –ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω
üìç –ê–¥—Ä–µ—Å: —É–ª. –õ–µ–Ω–∏–Ω–∞, 10
üìû –¢–µ–ª–µ—Ñ–æ–Ω: +79001234567

‚è∞ –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è: 14:00

–ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ –≤—ã–µ–∑–¥—É!
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê–ª–≥–æ—Ä–∏—Ç–º –ø–∞—Ä—Å–∏–Ω–≥–∞:

1. **–ü–æ–∏—Å–∫ –≤—Ä–µ–º–µ–Ω–∏** (HH:MM)
   ```python
   time_pattern = r'(\d{1,2}):(\d{2})'
   ```

2. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–∞—Ç—ã**:
   - –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: `–∑–∞–≤—Ç—Ä–∞`, `–ø–æ—Å–ª–µ–∑–∞–≤—Ç—Ä–∞`, `—á–µ—Ä–µ–∑ X –¥–Ω–µ–π`
   - –§–æ—Ä–º–∞—Ç –¥–∞—Ç—ã: `DD.MM.YYYY`
   - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: —Å–µ–≥–æ–¥–Ω—è

3. **–°–æ–∑–¥–∞–Ω–∏–µ datetime**:
   ```python
   scheduled_datetime = datetime.combine(target_date, time)
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞**:
   - –ï—Å–ª–∏ –¥–æ –≤–∏–∑–∏—Ç–∞ –æ—Ç **1:50 –¥–æ 2:10 —á–∞—Å–æ–≤** ‚Üí –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
   - –ï—Å–ª–∏ –±–æ–ª—å—à–µ **2:10 —á–∞—Å–æ–≤** ‚Üí –ø–æ–¥–æ–∂–¥–∞—Ç—å
   - –ï—Å–ª–∏ –º–µ–Ω—å—à–µ **1:50 —á–∞—Å–æ–≤** ‚Üí –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å (—Å–ª–∏—à–∫–æ–º –ø–æ–∑–¥–Ω–æ)

### –ì–¥–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ:

1. **–ï—Å–ª–∏ —É –º–∞—Å—Ç–µ—Ä–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Ä–∞–±–æ—á–∞—è –≥—Ä—É–ø–ø–∞** (`work_chat_id`):
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ **–≥—Ä—É–ø–ø—É**

2. **–ï—Å–ª–∏ –≥—Ä—É–ø–ø—ã –Ω–µ—Ç**:
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ **–ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** –º–∞—Å—Ç–µ—Ä—É

### –ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏:

- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç** (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ scheduler)
- –û–∫–Ω–æ –æ—Ç–ø—Ä–∞–≤–∫–∏: **20 –º–∏–Ω—É—Ç** (–æ—Ç 1:50 –¥–æ 2:10 –¥–æ –≤–∏–∑–∏—Ç–∞)
- –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. ‚úÖ **–¢–æ—á–Ω–æ—Å—Ç—å** - –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç —Ä–æ–≤–Ω–æ –∑–∞ 2 —á–∞—Å–∞
2. ‚úÖ **–ù–µ –Ω–∞–¥–æ–µ–¥–∞–µ—Ç** - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ SLA –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç
3. ‚úÖ **–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ—Å—Ç—å** - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –æ –∑–∞—è–≤–∫–µ –≤ –æ–¥–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏
4. ‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –≤—Ä–µ–º–µ–Ω–∏
5. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - –Ω–∏—á–µ–≥–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ

## –ß—Ç–æ –µ—Å–ª–∏ –≤—Ä–µ–º—è –Ω–µ —Ä–∞—Å–ø–∞—Ä—Å–∏–ª–æ—Å—å?

–ï—Å–ª–∏ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ —Å–º–æ–≥–ª–∞ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –≤–∏–∑–∏—Ç–∞:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π SLA** —Å —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–º –ø–æ—Ä–æ–≥–æ–º (30 –º–∏–Ω—É—Ç)
- –ú–∞—Å—Ç–µ—Ä –≤—Å–µ —Ä–∞–≤–Ω–æ –ø–æ–ª—É—á–∏—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ, –Ω–æ –ø–æ —Å—Ç–∞—Ä—ã–º –ø—Ä–∞–≤–∏–ª–∞–º

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:
```python
logger.info(f"Sending 2-hour reminder for rescheduled order #{order.id}, scheduled at {scheduled_datetime}")
logger.info(f"2-hour reminder sent for order #{order.id} to {'group' if master.work_chat_id else 'DM'} {target_chat_id}")
```

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `logs/bot.log`
