# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–∏—Å—Ç–µ–º–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ä–æ–ª–µ–π

## –û–±–∑–æ—Ä

–¢–µ–ø–µ—Ä—å –≤ –±–æ—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ä–æ–ª–µ–π, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–¥–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–æ–ª–µ–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –¥–∏—Å–ø–µ—Ç—á–µ—Ä –º–æ–∂–µ—Ç —Ç–∞–∫–∂–µ –±—ã—Ç—å –º–∞—Å—Ç–µ—Ä–æ–º –∏ –∏–º–µ—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ñ—É–Ω–∫—Ü–∏—è–º –æ–±–µ–∏—Ö —Ä–æ–ª–µ–π.

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ

### 1. –•—Ä–∞–Ω–µ–Ω–∏–µ —Ä–æ–ª–µ–π

–†–æ–ª–∏ —Ç–µ–ø–µ—Ä—å —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫–∏ —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º (–∑–∞–ø—è—Ç–∞—è) –≤ –ø–æ–ª–µ `role` —Ç–∞–±–ª–∏—Ü—ã `users`:
- **–û–¥–Ω–∞ —Ä–æ–ª—å**: `"DISPATCHER"`
- **–ù–µ—Å–∫–æ–ª—å–∫–æ —Ä–æ–ª–µ–π**: `"DISPATCHER,MASTER"` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è)

### 2. –ú–æ–¥–µ–ª—å User

–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–æ–ª—è–º–∏:

```python
user.get_roles()           # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ä–æ–ª–µ–π ['DISPATCHER', 'MASTER']
user.has_role('MASTER')    # –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Ä–æ–ª–∏
user.add_role('MASTER')    # –î–æ–±–∞–≤–ª—è–µ—Ç —Ä–æ–ª—å
user.remove_role('MASTER') # –£–¥–∞–ª—è–µ—Ç —Ä–æ–ª—å
user.get_primary_role()    # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—É—é —Ä–æ–ª—å (–ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É)
```

### 3. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ä–æ–ª–µ–π

–ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä–æ–ª–µ–π –æ—Å–Ω–æ–≤–Ω–∞—è —Ä–æ–ª—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É:
1. **ADMIN** (–Ω–∞–∏–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
2. **DISPATCHER**
3. **MASTER**
4. **UNKNOWN**

### 4. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

#### –ú–µ–Ω—é –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ä–æ–ª—è–º–∏ DISPATCHER + MASTER:
```
üìã –í—Å–µ –∑–∞—è–≤–∫–∏          ‚ûï –°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É
üìã –ú–æ–∏ –∑–∞—è–≤–∫–∏          üìä –ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
üë• –ú–∞—Å—Ç–µ—Ä–∞             üìä –û—Ç—á–µ—Ç—ã
‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏
```

#### –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ:
```
üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!

–£ –≤–∞—Å –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫–∞–∫ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞, —Ç–∞–∫ –∏ –º–∞—Å—Ç–µ—Ä–∞.
–í—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞—è–≤–∫–∏, –Ω–∞–∑–Ω–∞—á–∞—Ç—å –∏—Ö –º–∞—Å—Ç–µ—Ä–∞–º –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∏—Ö —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ.
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ–Ω—é –Ω–∏–∂–µ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–∞—Å—Ç–µ—Ä–∞ –¥–∏—Å–ø–µ—Ç—á–µ—Ä—É

–ö–æ–≥–¥–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –¥–æ–±–∞–≤–ª—è–µ—Ç –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –º–∞—Å—Ç–µ—Ä–∞ —á–µ—Ä–µ–∑ –º–µ–Ω—é "üë• –ú–∞—Å—Ç–µ—Ä–∞" ‚Üí "‚ûï –î–æ–±–∞–≤–∏—Ç—å –º–∞—Å—Ç–µ—Ä–∞":

1. –ë–æ—Ç —Å–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –º–∞—Å—Ç–µ—Ä–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ `masters`
2. –ö —Ä–æ–ª—è–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è **–¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è** —Ä–æ–ª—å `MASTER` (–Ω–µ –∑–∞–º–µ–Ω—è—è `DISPATCHER`)
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –æ–±–µ–∏–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—è–º

### –ú–µ—Ç–æ–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–æ–ª—è–º–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

```python
# –î–æ–±–∞–≤–∏—Ç—å —Ä–æ–ª—å (–Ω–µ —É–¥–∞–ª—è—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ)
await db.add_user_role(telegram_id, UserRole.MASTER)

# –£–¥–∞–ª–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ä–æ–ª—å
await db.remove_user_role(telegram_id, UserRole.MASTER)

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ä–æ–ª–µ–π (–∑–∞–º–µ–Ω—è–µ—Ç –≤—Å–µ)
await db.set_user_roles(telegram_id, [UserRole.DISPATCHER, UserRole.MASTER])

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–¥–Ω—É —Ä–æ–ª—å (–∑–∞–º–µ–Ω—è–µ—Ç –≤—Å–µ) - –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
await db.update_user_role(telegram_id, UserRole.MASTER)
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞

### –§–∏–ª—å—Ç—Ä—ã

–§–∏–ª—å—Ç—Ä—ã —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è—é—Ç –Ω–∞–ª–∏—á–∏–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–π –∏–∑ —Ç—Ä–µ–±—É–µ–º—ã—Ö —Ä–æ–ª–µ–π:

```python
@router.message(IsMaster())  # –°—Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ä–æ–ª—å—é MASTER
async def handler(message: Message):
    pass

@router.message(IsAdminOrDispatcher())  # –°—Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è ADMIN –∏–ª–∏ DISPATCHER
async def handler(message: Message):
    pass
```

### –í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö

Middleware –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ `data`:
- `user_role` - –æ—Å–Ω–æ–≤–Ω–∞—è —Ä–æ–ª—å (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
- `user_roles` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ä–æ–ª–µ–π

```python
async def handler(message: Message, user_role: str, user_roles: list):
    # user_role = "DISPATCHER" (–æ—Å–Ω–æ–≤–Ω–∞—è)
    # user_roles = ["DISPATCHER", "MASTER"]
    
    if UserRole.MASTER in user_roles:
        # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç —Ä–æ–ª—å –º–∞—Å—Ç–µ—Ä–∞
        pass
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –î–∏—Å–ø–µ—Ç—á–µ—Ä —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –º–∞—Å—Ç–µ—Ä–æ–º

**–ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤
- –†–æ–ª—å: `DISPATCHER`
- –ú–æ–∂–µ—Ç: —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞—è–≤–∫–∏, –Ω–∞–∑–Ω–∞—á–∞—Ç—å –º–∞—Å—Ç–µ—Ä–æ–≤

**–î–µ–π—Å—Ç–≤–∏–µ:** –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –¥–æ–±–∞–≤–ª—è–µ—Ç –ò–≤–∞–Ω–∞ –∫–∞–∫ –º–∞—Å—Ç–µ—Ä–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –†–æ–ª–∏: `DISPATCHER,MASTER`
- –ú–æ–∂–µ—Ç:
  - –°–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞—è–≤–∫–∏ (–∫–∞–∫ –¥–∏—Å–ø–µ—Ç—á–µ—Ä)
  - –ù–∞–∑–Ω–∞—á–∞—Ç—å –º–∞—Å—Ç–µ—Ä–æ–≤ (–∫–∞–∫ –¥–∏—Å–ø–µ—Ç—á–µ—Ä)
  - –ü–æ–ª—É—á–∞—Ç—å –∑–∞—è–≤–∫–∏ –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∏—Ö (–∫–∞–∫ –º–∞—Å—Ç–µ—Ä)
  - –í–∏–¥–µ—Ç—å —Å–≤–æ—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (–∫–∞–∫ –º–∞—Å—Ç–µ—Ä)

### –ü—Ä–∏–º–µ—Ä 2: –£–¥–∞–ª–µ–Ω–∏–µ —Ä–æ–ª–∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞ —É –º–∞—Å—Ç–µ—Ä–∞

```python
# –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ä–æ–ª—å –º–∞—Å—Ç–µ—Ä–∞
await db.remove_user_role(telegram_id, UserRole.DISPATCHER)
# –¢–µ–ø–µ—Ä—å —Ä–æ–ª–∏: "MASTER"
```

## –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å:
- –ü–∞—Ä–∞–º–µ—Ç—Ä `user_role` —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—Å–Ω–æ–≤–Ω—É—é —Ä–æ–ª—å
- –ù–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä `user_roles` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ —Ä–æ–ª–∏
- –°—Ç–∞—Ä—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ `if user_role == UserRole.MASTER` —Ä–∞–±–æ—Ç–∞—é—Ç
- –ù–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ `if UserRole.MASTER in user_roles` –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ—Ñ–∏–ª—è —Ç–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤—Å–µ —Ä–æ–ª–∏:

```
‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è

üë§ –ò–º—è: –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤
üÜî Telegram ID: 123456789
üëî –†–æ–ª–∏: –î–∏—Å–ø–µ—Ç—á–µ—Ä, –ú–∞—Å—Ç–µ—Ä
üì± Username: @ivan
```

## –ö–æ–º–∞–Ω–¥–∞ /help

–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ä–æ–ª—è–º–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞:

```
üìö –ü–æ–º–æ—â—å (–î–∏—Å–ø–µ—Ç—á–µ—Ä + –ú–∞—Å—Ç–µ—Ä)

–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
‚Ä¢ üìã –í—Å–µ –∑–∞—è–≤–∫–∏ - –ø—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∑–∞—è–≤–æ–∫
‚Ä¢ ‚ûï –°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞—è–≤–∫–∏
‚Ä¢ üìã –ú–æ–∏ –∑–∞—è–≤–∫–∏ - –ø—Ä–æ—Å–º–æ—Ç—Ä –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö –≤–∞–º –∑–∞—è–≤–æ–∫
‚Ä¢ üë• –ú–∞—Å—Ç–µ—Ä–∞ - –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –º–∞—Å—Ç–µ—Ä–æ–≤
‚Ä¢ üìä –û—Ç—á–µ—Ç—ã - –ø—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á–µ—Ç–æ–≤
‚Ä¢ üìä –ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ - –≤–∞—à–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç—ã
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:**
   - –î–æ–±–∞–≤–ª—è–π—Ç–µ —Ä–æ–ª—å –º–∞—Å—Ç–µ—Ä–∞ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —Å–∞–º–∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞—è–≤–∫–∏
   - –≠—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–±–æ—Ç—É –∏ –ø–æ–≤—ã—à–∞–µ—Ç –≥–∏–±–∫–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã

2. **–î–ª—è –¥–∏—Å–ø–µ—Ç—á–µ—Ä–æ–≤-–º–∞—Å—Ç–µ—Ä–æ–≤:**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ "üìã –í—Å–µ –∑–∞—è–≤–∫–∏" –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ–º–∏ –∑–∞—è–≤–∫–∞–º–∏
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ "üìã –ú–æ–∏ –∑–∞—è–≤–∫–∏" –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏—Ö –∑–∞—è–≤–æ–∫
   - –ù–∞–∑–Ω–∞—á–∞–π—Ç–µ —Å–µ–±–µ –∑–∞—è–≤–∫–∏, –µ—Å–ª–∏ –º–æ–∂–µ—Ç–µ –∏—Ö –≤—ã–ø–æ–ª–Ω–∏—Ç—å

3. **–ü—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏:**
   - –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã —Å –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π
   - –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å –æ–¥–Ω–æ–π —Ä–æ–ª—å—é –ø—Ä–æ–¥–æ–ª–∂–∞—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Ä–∞–Ω—å—à–µ
   - –ü—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤—å—Ç–µ —Ä–æ–ª–∏ –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ü–æ–ª–µ `role` –≤ —Ç–∞–±–ª–∏—Ü–µ `users`:
```sql
role TEXT DEFAULT 'UNKNOWN'
```

–ü—Ä–∏–º–µ—Ä—ã –∑–Ω–∞—á–µ–Ω–∏–π:
- `"ADMIN"`
- `"DISPATCHER"`
- `"MASTER"`
- `"DISPATCHER,MASTER"`

### Middleware

`RoleCheckMiddleware` —Ç–µ–ø–µ—Ä—å –¥–æ–±–∞–≤–ª—è–µ—Ç:
```python
data['user'] = db_user
data['user_role'] = db_user.get_primary_role()
data['user_roles'] = db_user.get_roles()
```

### –§–∏–ª—å—Ç—Ä—ã

`RoleFilter` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
```python
user_roles = kwargs.get('user_roles', [UserRole.UNKNOWN])
result = any(role in user_roles for role in self.roles)
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ä–æ–ª–µ–π –¥–µ–ª–∞–µ—Ç –±–æ—Ç –±–æ–ª–µ–µ –≥–∏–±–∫–∏–º –∏ —É–¥–æ–±–Ω—ã–º. –¢–µ–ø–µ—Ä—å –æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–æ–≤–º–µ—â–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ—É–Ω–∫—Ü–∏–π, —á—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –≤ –Ω–µ–±–æ–ª—å—à–∏—Ö –∫–æ–º–∞–Ω–¥–∞—Ö, –≥–¥–µ –¥–∏—Å–ø–µ—Ç—á–µ—Ä—ã —Ç–∞–∫–∂–µ –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ä–∞–±–æ—Ç—É –º–∞—Å—Ç–µ—Ä–æ–≤.

