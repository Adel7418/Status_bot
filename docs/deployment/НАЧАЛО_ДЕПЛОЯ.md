# ‚ö° –° —á–µ–≥–æ –Ω–∞—á–∞—Ç—å –¥–µ–ø–ª–æ–π –Ω–∞ VPS

> **–ë—ã—Å—Ç—Ä–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –æ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã –¥–æ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∑–∞ 10 –º–∏–Ω—É—Ç**

---

## üéØ –ß—Ç–æ –≤–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è

‚úÖ VPS —Å–µ—Ä–≤–µ—Ä –Ω–∞ Linux (Ubuntu/Debian)  
‚úÖ IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞  
‚úÖ SSH –¥–æ—Å—Ç—É–ø (root –∏–ª–∏ sudo –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)  
‚úÖ –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç @BotFather  
‚úÖ –í–∞—à Telegram ID (—É–∑–Ω–∞—Ç—å —É @userinfobot)

---

## üöÄ –î–µ–ø–ª–æ–π –≤ 3 —à–∞–≥–∞

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (–Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ)

**Windows PowerShell / CMD:**

```powershell
# 1. –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd C:\Bot_test\telegram_repair_bot

# 2. –°–æ–∑–¥–∞—Ç—å .env —Ñ–∞–π–ª
copy env.example .env
notepad .env
```

**–í .env —Ñ–∞–π–ª–µ –∑–∞–º–µ–Ω–∏—Ç–µ:**
- `BOT_TOKEN=...` ‚Üí –≤–∞—à —Ç–æ–∫–µ–Ω –æ—Ç @BotFather
- `ADMIN_IDS=...` ‚Üí –≤–∞—à Telegram ID
- –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª (Ctrl+S)

**3. –°–æ–∑–¥–∞–π—Ç–µ backup –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**

```powershell
python backup_db.py
python scripts\export_db.py
```

---

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ VPS (–æ–¥–∏–Ω —Ä–∞–∑)

**1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ VPS:**

```bash
ssh root@–≤–∞—à_IP_–∞–¥—Ä–µ—Å   
# –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å
```

**2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É:**

```bash
# –°–∫–∞—á–∞—Ç—å —Å–∫—Ä–∏–ø—Ç
wget https://raw.githubusercontent.com/Adel7418/Status_bot/main/scripts/setup_vps.sh

# –ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å –≤—Ä—É—á–Ω—É—é (–µ—Å–ª–∏ wget –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
nano setup_vps.sh
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏–∑ scripts/setup_vps.sh
# Ctrl+O, Enter, Ctrl+X

# –°–¥–µ–ª–∞—Ç—å –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x setup_vps.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
./setup_vps.sh
```

**3. –í—ã–π–¥–∏—Ç–µ –∏ –∑–∞–π–¥–∏—Ç–µ —Å–Ω–æ–≤–∞:**

```bash
exit
ssh root@–≤–∞—à_IP_–∞–¥—Ä–µ—Å
```

---

### –®–∞–≥ 3: –î–µ–ø–ª–æ–π –∏ –∑–∞–ø—É—Å–∫

**–í–∞—Ä–∏–∞–Ω—Ç A: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

**–ù–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ (Git Bash):**

```bash
cd /c/Bot_test/telegram_repair_bot
bash scripts/deploy_to_vps.sh –≤–∞—à_IP root
```

**–ù–∞ VPS:**

```bash
cd ~/telegram_repair_bot
docker compose -f docker/docker-compose.prod.yml up -d
docker compose -f docker/docker-compose.prod.yml logs -f bot
```

---

**–í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ GitHub**

**–ù–∞ VPS:**

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
git clone https://github.com/Adel7418/Status_bot.git telegram_repair_bot
cd telegram_repair_bot

# –°–æ–∑–¥–∞—Ç—å .env
cp env.example .env
nano .env
# –î–æ–±–∞–≤—å—Ç–µ BOT_TOKEN –∏ ADMIN_IDS
# Ctrl+O, Enter, Ctrl+X

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
docker compose -f docker/docker-compose.prod.yml up -d
docker compose -f docker/docker-compose.prod.yml logs -f bot
```

**–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ë–î —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã:**

```powershell
# –ù–∞ Windows
scp C:\Bot_test\telegram_repair_bot\bot_database.db root@–≤–∞—à_IP:/root/telegram_repair_bot/data/
```

---

**–í–∞—Ä–∏–∞–Ω—Ç C: –†—É—á–Ω–æ–π (—á–µ—Ä–µ–∑ SCP)**

**–ù–∞ Windows:**

```powershell
cd C:\Bot_test\telegram_repair_bot

# –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç
scp -r . root@–≤–∞—à_IP:/root/telegram_repair_bot/
```

**–ù–∞ VPS:**

```bash
cd ~/telegram_repair_bot
cp env.example .env
nano .env  # –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ç–æ–∫–µ–Ω—ã

# –ó–∞–ø—É—Å–∫
docker compose -f docker/docker-compose.prod.yml up -d
docker compose -f docker/docker-compose.prod.yml logs -f bot
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ VPS:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker ps

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
# telegram_repair_bot_prod  Up  Healthy
# telegram_bot_redis_prod   Up  Healthy

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker compose -f ~/telegram_repair_bot/docker/docker-compose.prod.yml logs --tail=50 bot
```

### 2. –í Telegram:

1. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ (–∏–º—è —É–∫–∞–∑–∞–Ω–æ –≤ @BotFather)
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
3. –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã `/help`, `/menu`

---

## üîß –ë–∞–∑–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

**–ó–∞–ø—É—Å–∫:**
```bash
cd ~/telegram_repair_bot
docker compose -f docker/docker-compose.prod.yml up -d
```

**–û—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```bash
docker compose -f docker/docker-compose.prod.yml down
```

**–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫:**
```bash
docker compose -f docker/docker-compose.prod.yml restart
```

**–õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:**
```bash
docker compose -f docker/docker-compose.prod.yml logs -f bot
# –í—ã—Ö–æ–¥: Ctrl+C
```

**–°—Ç–∞—Ç—É—Å:**
```bash
docker compose -f docker/docker-compose.prod.yml ps
```

---

## üÜò –ß—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?

### –ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# 1. –°–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏
docker compose -f ~/telegram_repair_bot/docker/docker-compose.prod.yml logs bot

# 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º .env
cat ~/telegram_repair_bot/.env | grep BOT_TOKEN

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º
cd ~/telegram_repair_bot
docker compose -f docker/docker-compose.prod.yml down
docker compose -f docker/docker-compose.prod.yml up -d
```

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –≤ Telegram

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –Ω–∞ VPS
ping -c 3 api.telegram.org

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ç–æ–∫–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
cat .env | grep BOT_TOKEN

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker compose -f docker/docker-compose.prod.yml restart bot
```

### "Permission denied"

```bash
# –î–∞—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ —Ñ–∞–π–ª—ã
cd ~/telegram_repair_bot
chmod -R 755 .
chmod 600 .env
```

---

## üìö –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –∏–∑—É—á–∏—Ç–µ:

1. **`DEPLOY_VPS_LINUX_GUIDE.md`** - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Å–æ –≤—Å–µ–º–∏ –¥–µ—Ç–∞–ª—è–º–∏
2. **`QUICK_DEPLOY_COMMANDS.md`** - —à–ø–∞—Ä–≥–∞–ª–∫–∞ –∫–æ–º–∞–Ω–¥ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
3. **`–î–ï–ü–õ–û–ô_–ù–ê_VPS_–†–ï–ó–Æ–ú–ï.md`** - –∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
4. **`scripts/README.md`** - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Å–∫—Ä–∏–ø—Ç–∞–º –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### 1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫

```bash
sudo nano /etc/systemd/system/telegram-bot.service
```

–í—Å—Ç–∞–≤–∏—Ç—å:

```ini
[Unit]
Description=Telegram Repair Bot
After=docker.service

[Service]
Type=oneshot
RemainAfterExit=yes
WorkingDirectory=/root/telegram_repair_bot
ExecStart=/usr/bin/docker compose -f docker/docker-compose.prod.yml up -d
ExecStop=/usr/bin/docker compose -f docker/docker-compose.prod.yml down

[Install]
WantedBy=multi-user.target
```

–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å:

```bash
sudo systemctl daemon-reload
sudo systemctl enable telegram-bot
sudo systemctl start telegram-bot
```

### 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π backup

```bash
crontab -e
```

–î–æ–±–∞–≤–∏—Ç—å (backup –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 2:00):

```
0 2 * * * cd /root/telegram_repair_bot && docker compose -f docker/docker-compose.prod.yml exec -T bot python backup_db.py
```

### 3. –°–æ–∑–¥–∞—Ç—å –∞–ª–∏–∞—Å—ã –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞

```bash
nano ~/.bashrc
```

–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–Ω–µ—Ü:

```bash
alias bot='cd ~/telegram_repair_bot'
alias bot-start='cd ~/telegram_repair_bot && docker compose -f docker/docker-compose.prod.yml up -d'
alias bot-stop='cd ~/telegram_repair_bot && docker compose -f docker/docker-compose.prod.yml down'
alias bot-logs='cd ~/telegram_repair_bot && docker compose -f docker/docker-compose.prod.yml logs -f bot'
alias bot-status='docker ps | grep telegram'
```

–ü—Ä–∏–º–µ–Ω–∏—Ç—å:

```bash
source ~/.bashrc
```

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

```bash
bot-start   # –ó–∞–ø—É—Å–∫
bot-logs    # –õ–æ–≥–∏
bot-status  # –°—Ç–∞—Ç—É—Å
bot-stop    # –û—Å—Ç–∞–Ω–æ–≤–∫–∞
```

---

## üìä –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

```bash
# –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ–≥–æ
docker ps && \
docker stats --no-stream && \
du -h ~/telegram_repair_bot/data/bot_database.db

# –†–∞–∑–º–µ—Ä –ª–æ–≥–æ–≤
docker inspect telegram_repair_bot_prod | grep LogPath

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞
df -h

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
free -h

# –°–ø–∏—Å–æ–∫ backup
ls -lh ~/telegram_repair_bot/backups/
```

---

## üéÅ –ì–æ—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

–í –ø—Ä–æ–µ–∫—Ç–µ —É–∂–µ –µ—Å—Ç—å:

- ‚úÖ `scripts/setup_vps.sh` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ VPS
- ‚úÖ `scripts/deploy_to_vps.sh` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π
- ‚úÖ `scripts/export_db.py` - —ç–∫—Å–ø–æ—Ä—Ç –ë–î –≤ JSON
- ‚úÖ `scripts/import_db.py` - –∏–º–ø–æ—Ä—Ç –ë–î –∏–∑ JSON

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏!

---

## üí° –°–æ–≤–µ—Ç—ã

1. **–í—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ backup** –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏: `python backup_db.py`
2. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏** –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è: `docker logs -f`
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ SSH –∫–ª—é—á–∏** –≤–º–µ—Å—Ç–æ –ø–∞—Ä–æ–ª–µ–π
4. **–û–±–Ω–æ–≤–ª—è–π—Ç–µ —Å–∏—Å—Ç–µ–º—É** —Ä–µ–≥—É–ª—è—Ä–Ω–æ: `sudo apt update && sudo apt upgrade`
5. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Ä–µ—Å—É—Ä—Å—ã**: `docker stats`

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –±—ã—Å—Ç—Ä–æ–≥–æ –¥–µ–ø–ª–æ—è

- [ ] VPS —Å–µ—Ä–≤–µ—Ä –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω
- [ ] .env —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (BOT_TOKEN, ADMIN_IDS)
- [ ] –°–æ–∑–¥–∞–Ω backup –ë–î
- [ ] –°–∫—Ä–∏–ø—Ç setup_vps.sh –∑–∞–ø—É—â–µ–Ω –Ω–∞ VPS
- [ ] –ü—Ä–æ–µ–∫—Ç –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω –Ω–∞ VPS
- [ ] Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã
- [ ] –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ /start –≤ Telegram
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π backup

---

## üöÄ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –≤–∞—à –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ VPS 24/7!

**–ß—Ç–æ –¥–∞–ª—å—à–µ?**

- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–æ—Ç–∞
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Sentry, Prometheus)
- –ò–∑—É—á–∏—Ç–µ –æ—Å—Ç–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
- –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 13 –æ–∫—Ç—è–±—Ä—è 2025

üìñ **–ë–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:** `DEPLOY_VPS_LINUX_GUIDE.md`  
‚ö° **–ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã:** `QUICK_DEPLOY_COMMANDS.md`  
üìù **–ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ:** `–î–ï–ü–õ–û–ô_–ù–ê_VPS_–†–ï–ó–Æ–ú–ï.md`

üéâ **–£—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è!**

