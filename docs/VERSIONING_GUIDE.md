# üè∑Ô∏è –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—é –∏ —Ä–µ–ª–∏–∑–∞–º

## –§–∏–ª–æ—Å–æ—Ñ–∏—è –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º **Git Tags** –¥–ª—è –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–ª–∏–∑–æ–≤:
- –í–µ—Ä—Å–∏–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è **–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ**
- –°–µ—Ä–≤–µ—Ä –¥–µ–ø–ª–æ–∏—Ç **–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –≤–µ—Ä—Å–∏–∏** –ø–æ —Ç—ç–≥–∞–º
- –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—å –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å –¥–µ–ø–ª–æ–µ–≤

## Semantic Versioning (SemVer)

–ò—Å–ø–æ–ª—å–∑—É–µ–º —Ñ–æ—Ä–º–∞—Ç: `vMAJOR.MINOR.PATCH`

- **MAJOR** (v2.0.0) - –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è API/–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- **MINOR** (v1.2.0) - –Ω–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (–æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π)
- **PATCH** (v1.1.1) - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–æ–≤

### –ü—Ä–∏–º–µ—Ä—ã:
- `v1.0.0` - –ø–µ—Ä–≤—ã–π production —Ä–µ–ª–∏–∑
- `v1.1.0` - –¥–æ–±–∞–≤–ª–µ–Ω —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª "–∞–¥–º–∏–Ω –æ—Ç –∏–º–µ–Ω–∏ –º–∞—Å—Ç–µ—Ä–∞"
- `v1.1.1` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ —Å datetime –≤ –æ—Ç—á–µ—Ç–∞—Ö
- `v2.0.0` - –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –ë–î

## –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å

### 1. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (–Ω–∞ –ª–æ–∫–∞–ª–∫–µ)

```bash
# –†–∞–±–æ—Ç–∞–π—Ç–µ –≤ –≤–µ—Ç–∫–µ main
git checkout main

# –í–Ω–æ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç–µ –∫–æ–¥...

# –ö–æ–º–º–∏—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
make git-save MSG="–¥–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª"
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–∞ (–Ω–∞ –ª–æ–∫–∞–ª–∫–µ)

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ë—ã—Å—Ç—Ä—ã–π —Ä–µ–ª–∏–∑ (–≤—Å—ë –≤ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–µ)

```bash
make git-release VERSION=v1.2.0 MSG="feat: admin can act as master"
```

–≠—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –î–æ–±–∞–≤–∏—Ç –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –°–æ–∑–¥–∞—Å—Ç –∫–æ–º–º–∏—Ç
- –û—Ç–ø—Ä–∞–≤–∏—Ç –≤ GitHub
- –°–æ–∑–¥–∞—Å—Ç —Ç—ç–≥ –≤–µ—Ä—Å–∏–∏
- –û—Ç–ø—Ä–∞–≤–∏—Ç —Ç—ç–≥ –≤ GitHub

#### –í–∞—Ä–∏–∞–Ω—Ç B: –ü–æ—ç—Ç–∞–ø–Ω–æ

```bash
# 1. –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
make git-save MSG="–≥–æ—Ç–æ–≤ –∫ —Ä–µ–ª–∏–∑—É v1.2.0"

# 2. –°–æ–∑–¥–∞—Ç—å —Ç—ç–≥
make git-tag VERSION=v1.2.0

# –ì–æ—Ç–æ–≤–æ!
```

### 3. –î–µ–ø–ª–æ–π –Ω–∞ production (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)

#### –î–µ–ø–ª–æ–π –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ –∏–∑ main:

```bash
cd ~/telegram_repair_bot
make prod-deploy
```

#### –î–µ–ø–ª–æ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–∏:

```bash
cd ~/telegram_repair_bot

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤–µ—Ä—Å–∏–∏
git fetch --tags
git tag -l

# –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≤–µ—Ä—Å–∏—é
make prod-deploy-version VERSION=v1.2.0
```

#### –û—Ç–∫–∞—Ç –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é –≤–µ—Ä—Å–∏—é:

```bash
# –û—Ç–∫–∞—Ç–∏—Ç—å—Å—è –Ω–∞ –≤–µ—Ä—Å–∏—é v1.1.0
make prod-deploy-version VERSION=v1.1.0
```

## –ö–æ–º–∞–Ω–¥—ã Make –¥–ª—è –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

### –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ:

```bash
make git-tag VERSION=v1.2.3          # –°–æ–∑–¥–∞—Ç—å —Ç—ç–≥
make git-tags                         # –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≤–µ—Ä—Å–∏–π
make git-release VERSION=v1.2.0 MSG="–æ–ø–∏—Å–∞–Ω–∏–µ"  # –ü–æ–ª–Ω—ã–π —Ä–µ–ª–∏–∑
```

### –ù–∞ production —Å–µ—Ä–≤–µ—Ä–µ:

```bash
make prod-deploy                      # –î–µ–ø–ª–æ–π latest (main)
make prod-deploy-version VERSION=v1.2.0  # –î–µ–ø–ª–æ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–∏
make prod-logs                        # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
make prod-status                      # –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ù–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

**–ù–∞ –ª–æ–∫–∞–ª–∫–µ:**
```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∞–ª–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
# –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–∏

# –°–æ–∑–¥–∞–µ–º —Ä–µ–ª–∏–∑
make git-release VERSION=v1.3.0 MSG="feat: add master statistics dashboard"
```

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
```bash
# –î–µ–ø–ª–æ–∏–º
make prod-deploy-version VERSION=v1.3.0

# –ü—Ä–æ–≤–µ—Ä—è–µ–º
make prod-logs
```

### –ü—Ä–∏–º–µ—Ä 2: –°—Ä–æ—á–Ω—ã–π hotfix

**–ù–∞ –ª–æ–∫–∞–ª–∫–µ:**
```bash
# –ò—Å–ø—Ä–∞–≤–∏–ª–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã–π –±–∞–≥
make git-release VERSION=v1.2.1 MSG="fix: critical bug in order completion"
```

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
```bash
# –°—Ä–æ—á–Ω–æ –¥–µ–ø–ª–æ–∏–º
make prod-deploy-version VERSION=v1.2.1
```

### –ü—Ä–∏–º–µ—Ä 3: –û—Ç–∫–∞—Ç –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é –≤–µ—Ä—Å–∏—é

–ï—Å–ª–∏ –Ω–∞ production —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å:

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
```bash
# –û—Ç–∫–∞—Ç—ã–≤–∞–µ–º—Å—è –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é —Ä–∞–±–æ—á—É—é –≤–µ—Ä—Å–∏—é
make prod-deploy-version VERSION=v1.2.0

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç
make prod-logs
```

## –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π

–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é:

```bash
# –í—Å–µ –≤–µ—Ä—Å–∏–∏
git tag -l

# –î–µ—Ç–∞–ª–∏ –≤–µ—Ä—Å–∏–∏
git show v1.2.0

# –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏
git log v1.1.0..v1.2.0 --oneline
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### ‚úÖ –•–æ—Ä–æ—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏:

1. **–í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º** –Ω–∞ –ª–æ–∫–∞–ª–∫–µ
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** –≤ —Ç—ç–≥–∞—Ö
3. **–†–µ–ª–∏–∑—å—Ç–µ —á–∞—Å—Ç–æ** - –ª—É—á—à–µ v1.2.1, v1.2.2, —á–µ–º –æ–¥–∏–Ω –±–æ–ª—å—à–æ–π v2.0.0
4. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è** –≤ –∫–æ–º–º–∏—Ç–∞—Ö
5. **–î–µ–ª–∞–π—Ç–µ backup –ë–î** –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º: `make prod-backup`

### ‚ùå –ü–ª–æ—Ö–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏:

1. –ù–µ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ —Ç—ç–≥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
2. –ù–µ –¥–µ–ø–ª–æ–π—Ç–µ –±–µ–∑ –≤–µ—Ä—Å–∏–π (–Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã–π –∫–æ–¥)
3. –ù–µ —É–¥–∞–ª—è–π—Ç–µ —Å—Ç–∞—Ä—ã–µ —Ç—ç–≥–∏
4. –ù–µ –ø—Ä–æ–ø—É—Å–∫–∞–π—Ç–µ –≤–µ—Ä—Å–∏–∏ (v1.1.0 ‚Üí v1.3.0)

## –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞

–£–∑–Ω–∞—Ç—å —Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
cd ~/telegram_repair_bot
git describe --tags --abbrev=0
```

## –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞ –≤–µ—Ä—Å–∏–∏ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–∫—Ä–∏–ø—Ç:

```bash
# –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é –∏ —É–≤–µ–ª–∏—á–∏—Ç—å PATCH
LAST_TAG=$(git describe --tags --abbrev=0 2>/dev/null || echo "v0.0.0")
# –ü–∞—Ä—Å–∏–Ω–≥ –∏ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç...
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CI/CD

–í –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å GitHub Actions –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç—ç–≥–∞:

```yaml
# .github/workflows/deploy.yml
on:
  push:
    tags:
      - 'v*'
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

### –°–æ–∑–¥–∞—Ç—å —Ç—ç–≥ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è:

```bash
make git-tag VERSION=v1.0.0
```

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ä–µ–ª–∏–∑–µ:

```bash
git log v1.1.0..v1.2.0 --oneline --graph
```

### –°–æ–∑–¥–∞—Ç—å CHANGELOG:

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏
git log v1.1.0..v1.2.0 --pretty=format:"- %s" > CHANGELOG.md
```

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ù–∞ –ª–æ–∫–∞–ª–∫–µ (Windows):
```bash
# 1. –†–∞–∑—Ä–∞–±–æ—Ç–∞–ª–∏ —Ñ–∏—á—É
# 2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–∏
# 3. –†–µ–ª–∏–∑
make git-release VERSION=v1.2.0 MSG="–æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
```

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (Linux):
```bash
# –î–µ–ø–ª–æ–π
make prod-deploy-version VERSION=v1.2.0

# –ò–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–¥:
make prod-deploy
```

**–ì–æ—Ç–æ–≤–æ!** üéâ
