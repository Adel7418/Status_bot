# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–µ—Ä –∑–∞—è–≤–æ–∫ –∏–∑ Telegram-–≥—Ä—É–ø–ø—ã

## –û–ø–∏—Å–∞–Ω–∏–µ

–§—É–Ω–∫—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ Telegram-–≥—Ä—É–ø–ø—ã –¥–∏—Å–ø–µ—Ç—á–µ—Ä–æ–≤ –∏ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–æ–∫ –≤ —Å–∏—Å—Ç–µ–º–µ.

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**

- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Telegram-–≥—Ä—É–ø–ø—ã —á–µ—Ä–µ–∑ Telethon (MTProto API)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ –Ω–µ—Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–∏–ø–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ —Å–ª–æ–≤–∞—Ä—å —Å–æ–∫—Ä–∞—â–µ–Ω–∏–π (–°/–º ‚Üí –°—Ç–∏—Ä–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞)
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞, —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–µ–∑–¥–∞
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —á–µ—Ä–µ–∑ inline-–∫–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –∑–∞—è–≤–∫–∏
- –†–∞–±–æ—Ç–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –æ—Å–Ω–æ–≤–Ω—ã–º –±–æ—Ç–æ–º

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ API credentials –¥–ª—è Telethon

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ <https://my.telegram.org>:

1. –í–æ–π–¥–∏—Ç–µ —Å –≤–∞—à–∏–º –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–∞
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "API development tools"
3. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–ª—é–±–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ)
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `api_id` –∏ `api_hash`

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env` —Ñ–∞–π–ª:

```env
# Telethon Parser Configuration
PARSER_ENABLED=true
TELETHON_API_ID=12345678              # –í–∞—à API ID
TELETHON_API_HASH=abcdef1234567890... # –í–∞—à API Hash
TELETHON_PHONE=+79001234567           # –ù–æ–º–µ—Ä –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
TELETHON_SESSION_NAME=parser_session  # –ò–º—è session —Ñ–∞–π–ª–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

### 3. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î

```bash
alembic upgrade head
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç —Ç–∞–±–ª–∏—Ü—É `parser_config` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

### 4. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
python bot.py
```

**–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫:**

- Telethon –ø–æ–ø—Ä–æ—Å–∏—Ç –≤–≤–µ—Å—Ç–∏ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∏–∑ SMS
- –ö–æ–¥ –Ω—É–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ –≤ –∫–æ–Ω—Å–æ–ª—å –≥–¥–µ –∑–∞–ø—É—â–µ–Ω –±–æ—Ç
- –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è session —Ñ–∞–π–ª (`parser_session.session`)
- –°–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—É—Å–∫–∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### 5. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ID –≥—Ä—É–ø–ø—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `/set_group` (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã):

**–°–ø–æ—Å–æ–± 1:** –ü–µ—Ä–µ—Å–ª–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –≥—Ä—É–ø–ø—ã

```
1. –ü–µ—Ä–µ—à–ª–∏—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ —Ü–µ–ª–µ–≤–æ–π –≥—Ä—É–ø–ø—ã –±–æ—Ç—É
2. –û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –ø–µ—Ä–µ—Å–ª–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π /set_group
```

**–°–ø–æ—Å–æ–± 2:** –£–∫–∞–∑–∞—Ç—å ID –Ω–∞–ø—Ä—è–º—É—é

```
/set_group -1001234567890
```

üí° –ß—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å ID –≥—Ä—É–ø–ø—ã, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ @username_to_id_bot

### 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```
/parser_status
```

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:

- –°—Ç–∞—Ç—É—Å –ø–∞—Ä—Å–µ—Ä–∞ (–≤–∫–ª—é—á—ë–Ω/–æ—Ç–∫–ª—é—á—ë–Ω)
- ID –≥—Ä—É–ø–ø—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ .env

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞

–ü–∞—Ä—Å–µ—Ä –ø–æ–Ω–∏–º–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏–π:

**–ü—Ä–∏–º–µ—Ä 1: –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è**

```
–°/–º –Ω–µ –∫—Ä—É—Ç–∏—Ç –±–∞—Ä–∞–±–∞–Ω, —à—É–º–∏—Ç –ø—Ä–∏ –æ—Ç–∂–∏–º–µ
—É–ª. –õ–µ–Ω–∏–Ω–∞ 5, –∫–≤. 10
+79001234567
–∑–∞–≤—Ç—Ä–∞ –∫ 14:00
```

**–ü—Ä–∏–º–µ—Ä 2: –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (—Ç–æ–ª—å–∫–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è)**

```
—Ç–≤ –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è
–ì–∞–≥–∞—Ä–∏–Ω–∞ 12-5
```

**–ü—Ä–∏–º–µ—Ä 3: –û–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π**

```
–°/–º —Ç–µ—á—ë—Ç. —É–ª. –õ–µ–Ω–∏–Ω–∞ 5-10. +79001234567
```

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è

- **–¢–∏–ø –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è** (–°/–º, —Ç–≤, —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫ –∏ —Ç.–¥.)
- **–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã** (–Ω–µ –∫—Ä—É—Ç–∏—Ç, —Ç–µ—á—ë—Ç, –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è)
- **–ê–¥—Ä–µ—Å** (—É–ª–∏—Ü–∞, –¥–æ–º, –∫–≤–∞—Ä—Ç–∏—Ä–∞)

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª—è

- **–¢–µ–ª–µ—Ñ–æ–Ω** (+7XXXXXXXXXX, 8XXXXXXXXXX)
- **–í—Ä–µ–º—è –≤—ã–µ–∑–¥–∞** (–∑–∞–≤—Ç—Ä–∞ –∫ 14:00, —Å 9 –¥–æ 12, —Å—Ä–æ—á–Ω–æ)
- **–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "–ö–ª–∏–µ–Ω—Ç")

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è

| –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ | –ü–æ–ª–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ |
|------------|-----------------|
| –°/–º, —Å–º, —Å—Ç–∏—Ä–∞–ª–∫–∞ | –°—Ç–∏—Ä–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞ |
| –ü/–º, –ø–º, –ø–æ—Å—É–¥–æ–º–æ–π–∫–∞ | –ü–æ—Å—É–¥–æ–º–æ–µ—á–Ω–∞—è –º–∞—à–∏–Ω–∞ |
| –¢–í, —Ç–µ–ª–∏–∫ | –¢–µ–ª–µ–≤–∏–∑–æ—Ä |
| –•–æ–ª–æ–¥, —Ö–æ–ª | –•–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫ |
| –°–í–ß, –º–∏–∫—Ä–æ–≤–æ–ª–Ω–æ–≤–∫–∞ | –ú–∏–∫—Ä–æ–≤–æ–ª–Ω–æ–≤–∞—è –ø–µ—á—å |
| –í–∞—Ä.–ø–∞–Ω, –≤–∞—Ä–æ—á–∫–∞ | –í–∞—Ä–æ—á–Ω–∞—è –ø–∞–Ω–µ–ª—å |
| –î—É—Ö.—à–∫, –¥—É—Ö–æ–≤–∫–∞ | –î—É—Ö–æ–≤–æ–π —à–∫–∞—Ñ |
| –ö–æ–Ω–¥, –∫–æ–Ω–¥–µ–π, —Å–ø–ª–∏—Ç | –ö–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä |

–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫: `app/services/telegram_parser/equipment_dict.py`

## Workflow —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏

```
1. –î–∏—Å–ø–µ—Ç—á–µ—Ä –ø–∏—à–µ—Ç –≤ –≥—Ä—É–ø–ø—É: "–°/–º —Ç–µ—á—ë—Ç. —É–ª. –õ–µ–Ω–∏–Ω–∞ 5-10. +79001234567"

2. Telethon –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ

3. OrderParserService –ø–∞—Ä—Å–∏—Ç —Ç–µ–∫—Å—Ç:
   ‚úÖ –¢–∏–ø: –°—Ç–∏—Ä–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞
   ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞: —Ç–µ—á—ë—Ç
   ‚úÖ –ê–¥—Ä–µ—Å: —É–ª. –õ–µ–Ω–∏–Ω–∞ 5-10
   ‚úÖ –¢–µ–ª–µ—Ñ–æ–Ω: +79001234567

4. –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å inline-–∫–Ω–æ–ø–∫–∞–º–∏:

   üìã –°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É?
   üîß –¢–∏–ø: –°—Ç–∏—Ä–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞
   ‚ùó –ü—Ä–æ–±–ª–µ–º–∞: —Ç–µ—á—ë—Ç
   üìç –ê–¥—Ä–µ—Å: —É–ª. –õ–µ–Ω–∏–Ω–∞ 5-10
   üìû –¢–µ–ª–µ—Ñ–æ–Ω: +79001234567

   [‚úÖ –î–∞] [‚ùå –ù–µ—Ç]

5. –î–∏—Å–ø–µ—Ç—á–µ—Ä –Ω–∞–∂–∏–º–∞–µ—Ç "‚úÖ –î–∞"

6. –ë–æ—Ç —Å–æ–∑–¥–∞—ë—Ç –∑–∞—è–≤–∫—É –≤ –ë–î:
   ‚úÖ –ó–∞—è–≤–∫–∞ #123 —Å–æ–∑–¥–∞–Ω–∞ –∏–∑ –ø–∞—Ä—Å–µ—Ä–∞!
```

## –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø–∞—Ä—Å–µ—Ä–∞

### –í—Ä–µ–º–µ–Ω–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ (—á–µ—Ä–µ–∑ .env)

```env
PARSER_ENABLED=false
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞.

### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –≤ –ë–î

```sql
UPDATE parser_config SET enabled = 0 WHERE id = 1;
```

## Troubleshooting

### –ü–∞—Ä—Å–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –Ω–æ –ø–∞—Ä—Å–µ—Ä –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `/parser_status`
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `PARSER_ENABLED=true`
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `group_id` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (`/set_group`)
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

### –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ Telethon

**–ü—Ä–æ–±–ª–µ–º–∞:** "Could not connect to Telegram servers" –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π

**–†–µ—à–µ–Ω–∏–µ:**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `TELETHON_API_ID` –∏ `TELETHON_API_HASH` –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `/parser_reset`** –¥–ª—è —Å–±—Ä–æ—Å–∞ —Å–µ—Å—Å–∏–∏ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (—Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞)
4. –ü–æ—Å–ª–µ —Å–±—Ä–æ—Å–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/parser_auth` –¥–ª—è –Ω–æ–≤–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

**–ö–æ–º–∞–Ω–¥–∞ `/parser_reset`:**

- –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–∞—Ä—Å–µ—Ä
- –£–¥–∞–ª—è–µ—Ç —Ñ–∞–π–ª —Å–µ—Å—Å–∏–∏ `parser_session.session`
- –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç FSM —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—á–∞—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –∑–∞–Ω–æ–≤–æ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

**–ö–æ–º–∞–Ω–¥–∞ `/parser_auth`:**

- –ó–∞–ø—É—Å–∫–∞–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é Telethon
- –¢—Ä–µ–±—É–µ—Ç—Å—è –≤–≤–æ–¥ –∫–æ–¥–∞ –∏–∑ SMS/Telegram
- –ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ 2FA —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–≤–æ–¥ –ø–∞—Ä–æ–ª—è
- **–í–∞–∂–Ω–æ:** –ö–æ–¥ –Ω—É–∂–Ω–æ –≤–≤–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª—ã –∏–ª–∏ –¥–µ—Ñ–∏—Å—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä: `1 2 3 4 5`), —á—Ç–æ–±—ã Telegram –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –≤—Ö–æ–¥

### –°–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –ø–∞—Ä—Å—è—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–æ–æ–±—â–µ–Ω–∏—è –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è (–æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ, –ø—Ä–æ–±–ª–µ–º–∞, –∞–¥—Ä–µ—Å)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ ‚Äî —Ç–∞–º –±—É–¥–µ—Ç –ø—Ä–∏—á–∏–Ω–∞ –Ω–µ—É–¥–∞—á–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ —Ç–æ–π –≥—Ä—É–ø–ø—ã, –∫–æ—Ç–æ—Ä–∞—è —É–∫–∞–∑–∞–Ω–∞ –≤ `group_id`

### –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–∞—Ä—Å–µ—Ä —Å–æ–∑–¥–∞—ë—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã –∑–∞—è–≤–æ–∫

**–†–µ—à–µ–Ω–∏–µ:**

- –ù–∞–∂–∏–º–∞–π—Ç–µ –∫–Ω–æ–ø–∫—É –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –Ω–µ –∑–∞–ø—É—â–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –±–æ—Ç–∞

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Telegram –ì—Ä—É–ø–ø–∞        ‚îÇ
‚îÇ  (–î–∏—Å–ø–µ—Ç—á–µ—Ä—ã)           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  TelethonClient         ‚îÇ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≥—Ä—É–ø–ø—ã (MTProto)
‚îÇ  (Telethon)             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  OrderParserService     ‚îÇ –ü–∞—Ä—Å–∏–Ω–≥ —Ç–µ–∫—Å—Ç–∞ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É
‚îÇ  (Regex + –≠–≤—Ä–∏—Å—Ç–∏–∫–∞)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ OrderConfirmationService‚îÇ Inline –∫–Ω–æ–ø–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
‚îÇ  (aiogram)              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  OrderRepository        ‚îÇ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ –≤ –ë–î
‚îÇ  (SQLAlchemy ORM)       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ú–æ–¥—É–ª–∏

- `app/services/telegram_parser/` ‚Äî –ü–∞—Ä—Å–µ—Ä –∑–∞—è–≤–æ–∫
  - `telethon_client.py` ‚Äî Telethon –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
  - `parser_service.py` ‚Äî –õ–æ–≥–∏–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞
  - `confirmation_service.py` ‚Äî –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏
  - `equipment_dict.py` ‚Äî –°–ª–æ–≤–∞—Ä—å —Å–æ–∫—Ä–∞—â–µ–Ω–∏–π
  - `patterns.py` ‚Äî Regex –ø–∞—Ç—Ç–µ—Ä–Ω—ã
  - `schemas.py` ‚Äî Pydantic –º–æ–¥–µ–ª–∏

- `app/services/parser_integration.py` ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–æ—Ç–æ–º
- `app/handlers/parser_config.py` ‚Äî –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- `app/database/parser_config_repository.py` ‚Äî –†–∞–±–æ—Ç–∞ —Å –ë–î

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Session —Ñ–∞–π–ª—ã

‚ö†Ô∏è **–í–ê–ñ–ù–û:** Session —Ñ–∞–π–ª—ã (`*.session`) —Å–æ–¥–µ—Ä–∂–∞—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ Telegram

- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –≤ `.gitignore`
- ‚úÖ –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ –≤ Git
- ‚úÖ –ù–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º

### –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

- `/set_group` ‚Äî —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã
- `/parser_status` ‚Äî —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫ —á–µ—Ä–µ–∑ –ø–∞—Ä—Å–µ—Ä –¥–æ—Å—Ç—É–ø–Ω–æ –≤—Å–µ–º –≤ –≥—Ä—É–ø–ø–µ

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–¥—Ä–æ–±–Ω—ã–µ –æ—Ç—á—ë—Ç—ã –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

- `docs/implementation/stage1_infrastructure.md` ‚Äî –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- `docs/implementation/stage2_patterns.md` ‚Äî –°–ª–æ–≤–∞—Ä—å –∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- `docs/implementation/stage3_schemas.md` ‚Äî Pydantic —Å—Ö–µ–º—ã
- `docs/implementation/stage4_parser_service.md` ‚Äî –õ–æ–≥–∏–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞
- `docs/implementation/stage5_telethon_integration.md` ‚Äî Telethon + –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- `docs/implementation/stage6_7_integration.md` ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–æ—Ç–æ–º

---

**–í–µ—Ä—Å–∏—è:** 2.11.0
**–î–∞—Ç–∞:** 27 —è–Ω–≤–∞—Ä—è 2025
**–ê–≤—Ç–æ—Ä:** Claude Code Sonnet
