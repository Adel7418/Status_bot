# CI/CD Quick Start

**–í—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏:** 10 –º–∏–Ω—É—Ç
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π CI/CD pipeline

---

## ‚ö° –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Pre-commit (–ª–æ–∫–∞–ª—å–Ω–æ)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å pre-commit
pip install pre-commit

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å hooks
pre-commit install

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
pre-commit run --all-files
```

‚úÖ **–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å –ø—Ä–∏ –∫–∞–∂–¥–æ–º `git commit` –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞.

---

### 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å GitHub (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### 2.1 –í–∫–ª—é—á–∏—Ç—å Actions

```
Settings ‚Üí Actions ‚Üí General ‚Üí Allow all actions
```

#### 2.2 –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Dependabot

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å `.github/dependabot.yml`:
```yaml
reviewers:
  - "your-github-username"  # <-- –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Å–≤–æ–π
assignees:
  - "your-github-username"  # <-- –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Å–≤–æ–π
```

#### 2.3 Branch Protection (–¥–ª—è production)

```
Settings ‚Üí Branches ‚Üí Add rule (–¥–ª—è main)
‚úÖ Require pull request before merging
‚úÖ Require status checks to pass:
   - CI - Tests
   - CI - PII Protection Check
```

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –û–±—ã—á–Ω—ã–π workflow:

```bash
# 1. –°–æ–∑–¥–∞—Ç—å branch
git checkout -b feat/my-feature

# 2. –°–¥–µ–ª–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
# ... edit files ...

# 3. Commit (pre-commit –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è)
git commit -m "feat: add new feature"

# 4. Push
git push origin feat/my-feature

# 5. –°–æ–∑–¥–∞—Ç—å PR –Ω–∞ GitHub
# ‚Üí CI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
```

### –°–æ–∑–¥–∞—Ç—å —Ä–µ–ª–∏–∑:

```bash
# 1. –û–±–Ω–æ–≤–∏—Ç—å VERSION
echo "1.2.0" > VERSION

# 2. Commit –∏ push
git add VERSION
git commit -m "release: v1.2.0"
git push

# 3. –°–æ–∑–¥–∞—Ç—å —Ç–µ–≥
git tag -a v1.2.0 -m "Release v1.2.0"
git push origin v1.2.0

# ‚Üí GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç —Ä–µ–ª–∏–∑
```

---

## üìã –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –ü—Ä–∏ –∫–∞–∂–¥–æ–º commit (–ª–æ–∫–∞–ª—å–Ω–æ):
- ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ (Ruff)
- ‚úÖ –õ–∏–Ω—Ç–∏–Ω–≥ (Ruff, MyPy)
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (Bandit)
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ PII –≤ –ª–æ–≥–∞—Ö
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ hardcoded secrets
- ‚úÖ –¢–µ—Å—Ç—ã (–ø—Ä–∏ push)

### –ü—Ä–∏ –∫–∞–∂–¥–æ–º push –≤ GitHub:
- ‚úÖ –¢–µ—Å—Ç—ã –Ω–∞ Python 3.11, 3.12, 3.13
- ‚úÖ Coverage —Ä–µ–ø–æ—Ä—Ç
- ‚úÖ –õ–∏–Ω—Ç–∏–Ω–≥ –∏ type checking
- ‚úÖ Security scan
- ‚úÖ PII protection check
- ‚úÖ Docker build

### –ü—Ä–∏ Pull Request:
- ‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ CI
- ‚úÖ –§–æ—Ä–º–∞—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞ PR
- ‚úÖ –†–∞–∑–º–µ—Ä PR
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ Coverage –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ labels

### –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–µ–≥–∞:
- ‚úÖ Deploy –Ω–∞ production
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ GitHub Release
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è changelog

---

## üõ†Ô∏è –ö–æ–º–∞–Ω–¥—ã

### Pre-commit:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö
pre-commit run --all-files

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π hook
pre-commit run ruff --all-files

# –û–±–Ω–æ–≤–∏—Ç—å hooks
pre-commit autoupdate

# –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å pre-commit (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è!)
git commit --no-verify
```

### GitHub Actions:

```bash
# –õ–æ–∫–∞–ª—å–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å workflow
act -j test  # –¢—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ 'act'

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç—É—Å
gh run list  # –¢—Ä–µ–±—É–µ—Ç GitHub CLI

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å failed workflow
gh run rerun <run-id>
```

---

## ‚úÖ Checklist –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º push

- [ ] Pre-commit —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: `pre-commit --version`
- [ ] Pre-commit hooks —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã: `pre-commit install`
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç: `pytest tests/ -v`
- [ ] –í `.github/dependabot.yml` –∑–∞–º–µ–Ω–µ–Ω username
- [ ] README.md –æ–±–Ω–æ–≤–ª–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] `.env` –Ω–µ –∑–∞–∫–æ–º–º–∏—á–µ–Ω

---

## üêõ Troubleshooting

**Q: Pre-commit —Å–ª–∏—à–∫–æ–º –º–µ–¥–ª–µ–Ω–Ω—ã–π**
```bash
# –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å pytest –ª–æ–∫–∞–ª—å–Ω–æ
SKIP=pytest-check git commit -m "fix: quick fix"
```

**Q: CI –ø–∞–¥–∞–µ—Ç, –Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é Python
python --version

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt -r requirements-dev.txt

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã –∫–∞–∫ –≤ CI
pytest tests/ -v --tb=short
```

**Q: –ù—É–∂–Ω–æ —Å—Ä–æ—á–Ω–æ –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫**
```bash
git commit --no-verify -m "hotfix: urgent fix"
# ‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –≤ –∫—Ä–∞–π–Ω–µ–º —Å–ª—É—á–∞–µ!
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `docs/CI_CD_GUIDE.md`

**–ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ:**
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö workflows
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ secrets –∏ environments
- Best practices
- –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞
- Troubleshooting

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ CI/CD —É –≤–∞—Å –µ—Å—Ç—å:

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –ø—Ä–∏ –∫–∞–∂–¥–æ–º push
‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞** –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** (–≤–∫–ª—é—á–∞—è PII)
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π** –ø—Ä–∏ —Ä–µ–ª–∏–∑–∞—Ö
‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** —á–µ—Ä–µ–∑ Dependabot
‚úÖ **Branch protection** –¥–ª—è production

**–í—Ä–µ–º—è —ç–∫–æ–Ω–æ–º–∏–∏:** ~30 –º–∏–Ω—É—Ç –Ω–∞ –∫–∞–∂–¥—ã–π PR (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏)
**–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞:** +50% (–º–µ–Ω—å—à–µ –±–∞–≥–æ–≤ –≤ production)
**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** +100% (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π)

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π CI/CD pipeline –∫–∞–∫ –≤ –±–æ–ª—å—à–∏—Ö –∫–æ–º–ø–∞–Ω–∏—è—Ö! üöÄ

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π PR
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ checks –ø—Ä–æ—Ö–æ–¥—è—Ç
3. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ –ø–æ–ª–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

---

**–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [`docs/CI_CD_GUIDE.md`](docs/CI_CD_GUIDE.md)
