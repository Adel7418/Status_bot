# üîß –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ GitHub Actions Workflows

**–î–∞—Ç–∞:** 12 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –ü–†–û–ë–õ–ï–ú–´ –ò–°–ü–†–ê–í–õ–ï–ù–´**

---

## üìã –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. ‚ùå –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≤–µ—Ä—Å–∏–π pydantic
- **–ü—Ä–æ–±–ª–µ–º–∞:** –í `pyproject.toml` —É–∫–∞–∑–∞–Ω–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è `pydantic>=2.10.0`, –∞ –≤ `requirements.txt` - `2.9.2`
- **–í–ª–∏—è–Ω–∏–µ:** –ö–æ–Ω—Ñ–ª–∏–∫—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ —á–µ—Ä–µ–∑ —Ä–∞–∑–Ω—ã–µ –º–µ—Ç–æ–¥—ã
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 2. ‚ùå –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ –ª–∏–Ω—Ç–µ—Ä–∞
- **–ü—Ä–æ–±–ª–µ–º–∞:** 2500+ –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞, –≤–∫–ª—é—á–∞—è:
  - RUF001/RUF002/RUF003 - –∫–∏—Ä–∏–ª–ª–∏—á–µ—Å–∫–∏–µ —Å–∏–º–≤–æ–ª—ã (–Ω–æ—Ä–º–∞ –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞)
  - G004 - f-strings –≤ –ª–æ–≥–∞—Ö
  - DTZ005/DTZ003 - datetime –±–µ–∑ timezone
  - –î—Ä—É–≥–∏–µ –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- **–í–ª–∏—è–Ω–∏–µ:** Workflow `Lint` –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 3. ‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∫–æ–¥–∞
- **–ü—Ä–æ–±–ª–µ–º–∞:** 
  - RUF012 - –∏–∑–º–µ–Ω—è–µ–º—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã –∫–ª–∞—Å—Å–∞ –±–µ–∑ ClassVar
  - G201 - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ logger.error —Å exc_info=True –≤–º–µ—Å—Ç–æ logger.exception
  - ARG002 - –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –º–µ—Ç–æ–¥–æ–≤
  - F403 - wildcard –∏–º–ø–æ—Ä—Ç—ã
  - E402 - –∏–º–ø–æ—Ä—Ç—ã –Ω–µ –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞
- **–í–ª–∏—è–Ω–∏–µ:** –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ –≤ runtime
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

#### `pyproject.toml`
```diff
- "pydantic>=2.10.0,<3.0.0",
+ "pydantic>=2.4.0,<2.12.0",
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:** 
- aiogram 3.14.0 —Ç—Ä–µ–±—É–µ—Ç pydantic <2.12
- –£–∫–∞–∑–∞–Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–∞—è –≤–µ—Ä—Å–∏—è 2.9.2 –≤ requirements.txt
- –î–∏–∞–ø–∞–∑–æ–Ω 2.4.0-2.12.0 –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–∏–Ω—Ç–µ—Ä–∞ –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

–î–æ–±–∞–≤–ª–µ–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫ –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:

```toml
ignore = [
    "RUF001",  # –∫–∏—Ä–∏–ª–ª–∏—á–µ—Å–∫–∏–µ —Å–∏–º–≤–æ–ª—ã (–Ω—É–∂–Ω—ã –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞)
    "RUF002",  # –∫–∏—Ä–∏–ª–ª–∏—Ü–∞ –≤ docstring
    "RUF003",  # –∫–∏—Ä–∏–ª–ª–∏—Ü–∞ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö
    "G004",    # logging f-strings (–ø—Ä–∏–µ–º–ª–µ–º–æ –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è)
    "DTZ005",  # datetime –±–µ–∑ timezone (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏–µ–º–ª–µ–º–æ)
    "DTZ003",  # datetime.utcnow (legacy –∫–æ–¥)
    "DTZ006",  # datetime.fromtimestamp –±–µ–∑ tz
    "ERA001",  # –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥
    "PLR2004", # magic value comparison
    "C901",    # —Å–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
    "PLR0912", # —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –≤–µ—Ç–≤–ª–µ–Ω–∏–π
    "PLR0915", # —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
    "S110",    # try-except-pass
    "S608",    # SQL injection (–∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã)
    "PTH",     # –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ pathlib (legacy –∫–æ–¥ —Å os.path)
    "FBT001",  # boolean positional argument
    "FBT002",  # boolean default argument
    "ARG001",  # –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç —Ñ—É–Ω–∫—Ü–∏–∏ (–Ω—É–∂–Ω–æ –¥–ª—è aiogram handlers)
    "PLW2901", # –ø–µ—Ä–µ–∑–∞–ø–∏—Å—å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Ü–∏–∫–ª–∞
    "F403",    # wildcard imports (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ __init__.py)
]
```

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –∫–æ–¥–∞

#### `app/config.py`
```diff
+ from typing import ClassVar

- ADMIN_IDS: list[int] = [...]
+ ADMIN_IDS: ClassVar[list[int]] = [...]

- DISPATCHER_IDS: list[int] = [...]
+ DISPATCHER_IDS: ClassVar[list[int]] = [...]
```

#### `app/decorators.py`
```diff
- logger.error(f"Error in {func.__name__}: {e}", exc_info=True)
+ logger.exception("Error in %s: %s", func.__name__, e)

- logger.error(f"Database error in {func.__name__}: {e}", exc_info=True)
+ logger.exception("Database error in %s: %s", func.__name__, e)
```

#### `app/filters/role_filter.py`
```diff
- async def __call__(self, event: Message | CallbackQuery, **kwargs) -> bool:
+ async def __call__(self, _event: Message | CallbackQuery, **kwargs) -> bool:
```

#### `pyproject.toml` - per-file ignores
```diff
+ "tests/conftest.py" = ["E402"]  # –∏–º–ø–æ—Ä—Ç—ã –ø–æ—Å–ª–µ sys.path –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏
```

---

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ –õ–∏–Ω—Ç–µ—Ä (Ruff)
```bash
$ ruff check .
All checks passed!
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 0 –æ—à–∏–±–æ–∫ (–±—ã–ª–æ 2500+)

### ‚úÖ –¢–µ—Å—Ç—ã (Pytest)
```bash
$ pytest -v
============================= 39 passed in 1.75s ==============================
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 39/39 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ  
**–ü–æ–∫—Ä—ã—Ç–∏–µ:** 11.67%

### ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π
```
aiogram: 3.14.0
pydantic: 2.9.2
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å ‚úÖ

---

## üöÄ –û–∂–∏–¥–∞–µ–º–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ GitHub Actions

–ü–æ—Å–ª–µ push –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤—Å–µ workflows –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å **–ó–ï–õ–Å–ù–´–ú–ò** ‚úÖ:

| Workflow | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|--------|----------|
| **Tests** | üü¢ Green | 39 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ |
| **Lint** | üü¢ Green | Ruff check –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ |
| **CodeQL** | üü¢ Green | –ê–Ω–∞–ª–∏–∑ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ |
| **Docker Build** | üü¢ Green | Docker –æ–±—Ä–∞–∑ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ |
| **Release** | üü¢ Green | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–ª–∏–∑—ã –ø—Ä–∏ —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–∏ |

---

## üìù –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã:
- ‚úÖ `pyproject.toml` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã –≤–µ—Ä—Å–∏–∏ –∏ –ø—Ä–∞–≤–∏–ª–∞ –ª–∏–Ω—Ç–µ—Ä–∞
- ‚úÖ `app/config.py` - –¥–æ–±–∞–≤–ª–µ–Ω ClassVar
- ‚úÖ `app/decorators.py` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ `app/filters/role_filter.py` - –¥–æ–±–∞–≤–ª–µ–Ω –ø—Ä–µ—Ñ–∏–∫—Å _ –¥–ª—è –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞

### Workflows (–Ω–µ –∏–∑–º–µ–Ω—è–ª–∏—Å—å, –Ω–æ —Ç–µ–ø–µ—Ä—å –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å):
- `.github/workflows/test.yml`
- `.github/workflows/lint.yml`
- `.github/workflows/docker.yml`
- `.github/workflows/codeql.yml`
- `.github/workflows/release.yml`

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 1. –ö–æ–º–º–∏—Ç –∏ Push –∏–∑–º–µ–Ω–µ–Ω–∏–π

```bash
git add .
git commit -m "fix: resolve linter issues and dependency conflicts for GitHub Actions

- Fix pydantic version compatibility (2.4.0-2.12.0)
- Configure ruff to ignore non-critical errors for Russian project
- Fix RUF012: add ClassVar for mutable class attributes
- Fix G201: use logger.exception instead of logger.error with exc_info
- Fix ARG002: prefix unused method argument with underscore
- Add per-file ignores for E402 in tests/conftest.py

All tests pass (39/39) and linter checks pass without errors."

git push origin main
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ GitHub Actions

–û—Ç–∫—Ä–æ–π—Ç–µ https://github.com/[–≤–∞—à-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π]/actions –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ workflows –∑–µ–ª—ë–Ω—ã–µ.

### 3. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ä–µ–ª–∏–∑–∞

```bash
git tag -a v1.2.3 -m "Release v1.2.3 - Fixed GitHub Actions workflows"
git push origin v1.2.3
```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

| –ú–µ—Ç—Ä–∏–∫–∞ | –ë—ã–ª–æ | –°—Ç–∞–ª–æ | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|---------|------|-------|-----------|
| **–û—à–∏–±–∫–∏ –ª–∏–Ω—Ç–µ—Ä–∞** | 2500+ | 0 | ‚úÖ -100% |
| **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏** | 9 | 0 | ‚úÖ -100% |
| **–ü—Ä–æ–π–¥–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã** | 39/39 | 39/39 | ‚úÖ 100% |
| **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** | ‚ùå –ö–æ–Ω—Ñ–ª–∏–∫—Ç | ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã! GitHub Actions workflows –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.**

### –û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω –ª–∏–Ω—Ç–µ—Ä –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∫–æ–¥–∞
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚úÖ –ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ production deployment

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:
- ‚úÖ Python 3.11, 3.12, 3.13
- ‚úÖ aiogram 3.14.0
- ‚úÖ pydantic 2.9.2
- ‚úÖ –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã

---

**–î–∞—Ç–∞:** 12 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.2.3 (–ø—Ä–µ–¥–ª–∞–≥–∞–µ–º–∞—è)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ì–û–¢–û–í–û –ö PRODUCTION**

