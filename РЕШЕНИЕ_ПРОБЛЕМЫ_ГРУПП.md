# –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –≥—Ä—É–ø–ø —É –º–∞—Å—Ç–µ—Ä–æ–≤

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–í –ª–æ–≥–∞—Ö production —Å–µ—Ä–≤–µ—Ä–∞ –≤–∏–¥–Ω–æ:
```
WARNING - ASSIGNMENT BLOCKED: Master 10 (–ê–ù) has no work_chat_id set.
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —É –º–∞—Å—Ç–µ—Ä–æ–≤ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Ä–∞–±–æ—á–∏–µ –≥—Ä—É–ø–ø—ã, –∏ –æ–Ω–∏ **–ù–ï –ú–û–ì–£–¢** –ø–æ–ª—É—á–∞—Ç—å –∑–∞—è–≤–∫–∏.

## –ü—Ä–∏—á–∏–Ω–∞

–£ –º–∞—Å—Ç–µ—Ä–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ø–æ–ª–µ `work_chat_id` - ID —Ä–∞–±–æ—á–µ–π –≥—Ä—É–ø–ø—ã, –∫—É–¥–∞ –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∑–∞—è–≤–∫–∞—Ö.

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (Docker)

```bash
# –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ –≥–æ—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
docker compose -f docker/docker-compose.prod.yml exec telegram_repair_bot_prod python /app/scripts/check_masters_groups.py

# –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ bash —Å–∫—Ä–∏–ø—Ç
bash scripts/docker_check_masters.sh
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ

```bash
python scripts/check_masters_groups.py
```

## –†–µ—à–µ–Ω–∏–µ

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±–æ—Ç–∞ (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

–≠—Ç–æ —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Å–ø–æ—Å–æ–±.

#### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ —Ä–∞–±–æ—á–∏–µ –≥—Ä—É–ø–ø—ã

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –º–∞—Å—Ç–µ—Ä–∞:
1. –°–æ–∑–¥–∞–π—Ç–µ –≥—Ä—É–ø–ø—É –≤ Telegram (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é)
2. –î–æ–±–∞–≤—å—Ç–µ –≤ –≥—Ä—É–ø–ø—É –º–∞—Å—Ç–µ—Ä–∞
3. –î–æ–±–∞–≤—å—Ç–µ –≤ –≥—Ä—É–ø–ø—É –±–æ—Ç–∞
4. –î–∞–π—Ç–µ –±–æ—Ç—É –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–∏–ª–∏ —Ö–æ—Ç—è –±—ã –ø—Ä–∞–≤–æ –ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è)

#### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≥—Ä—É–ø–ø—ã —á–µ—Ä–µ–∑ –±–æ—Ç–∞

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –º–∞—Å—Ç–µ—Ä–∞:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞** (–æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)
   - –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ –≤ Telegram
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`

2. **–û—Ç–∫—Ä–æ–π—Ç–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Å—Ç–µ—Ä–∞–º–∏**
   - –ù–∞–∂–º–∏—Ç–µ `üë• –ú–∞—Å—Ç–µ—Ä–∞`
   - –ù–∞–∂–º–∏—Ç–µ `üë• –í—Å–µ –º–∞—Å—Ç–µ—Ä–∞`

3. **–í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Å—Ç–µ—Ä–∞**
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω—É–∂–Ω–æ–≥–æ –º–∞—Å—Ç–µ—Ä–∞

4. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞–±–æ—á—É—é –≥—Ä—É–ø–ø—É**
   - –ù–∞–∂–º–∏—Ç–µ `üí¨ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞–±–æ—á—É—é –≥—Ä—É–ø–ø—É`
   - –ù–∞–∂–º–∏—Ç–µ `üí¨ –í—ã–±—Ä–∞—Ç—å –≥—Ä—É–ø–ø—É`
   - –í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—É—é —Ä–∞–Ω–µ–µ –≥—Ä—É–ø–ø—É –∏–∑ —Å–ø–∏—Å–∫–∞
   - –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –≤—ã–±–æ—Ä

5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ**
   - –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ: "‚úÖ –†–∞–±–æ—á–∞—è –≥—Ä—É–ø–ø–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞!"
   - –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É —Å–Ω–æ–≤–∞ (—Å–º. —Ä–∞–∑–¥–µ–ª "–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞")

#### –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –¥–ª—è –≤—Å–µ—Ö –º–∞—Å—Ç–µ—Ä–æ–≤

–í–∞–º –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≥—Ä—É–ø–ø—É –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–∞—Å—Ç–µ—Ä–∞ –æ—Ç–¥–µ–ª—å–Ω–æ.

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ SQL (–¥–ª—è –æ–ø—ã—Ç–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

‚ö†Ô∏è **–¢–û–õ–¨–ö–û –î–õ–Ø –û–ü–´–¢–ù–´–• –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô!**

#### –ù–∞ production —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É
docker compose -f docker/docker-compose.prod.yml exec telegram_repair_bot_prod /bin/sh

# –û—Ç–∫—Ä–æ–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
sqlite3 /app/data/bot_database.db

# –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
SELECT telegram_id, phone, specialization, work_chat_id FROM masters;

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ work_chat_id –¥–ª—è –º–∞—Å—Ç–µ—Ä–∞
# –ó–ê–ú–ï–ù–ò–¢–ï -1234567890 –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π ID –≥—Ä—É–ø–ø—ã
# –ó–ê–ú–ï–ù–ò–¢–ï 123456789 –Ω–∞ telegram_id –º–∞—Å—Ç–µ—Ä–∞
UPDATE masters
SET work_chat_id = -1234567890
WHERE telegram_id = 123456789;

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
SELECT telegram_id, phone, specialization, work_chat_id FROM masters;

# –í—ã—Ö–æ–¥
.exit
exit
```

#### –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å ID –≥—Ä—É–ø–ø—ã:

1. **–ß–µ—Ä–µ–∑ –ª–æ–≥–∏ –±–æ—Ç–∞**:
   - –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø—É
   - –í –ª–æ–≥–∞—Ö –ø–æ—è–≤–∏—Ç—Å—è ID –≥—Ä—É–ø–ø—ã

2. **–ß–µ—Ä–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –±–æ—Ç–∞**:
   - –î–æ–±–∞–≤—å—Ç–µ @getidsbot –≤ –≥—Ä—É–ø–ø—É
   - –ë–æ—Ç –ø–æ–∫–∞–∂–µ—Ç ID –≥—Ä—É–ø–ø—ã

3. **–í–∞–∂–Ω–æ**:
   - –û–±—ã—á–Ω—ã–µ –≥—Ä—É–ø–ø—ã: ID –≤–∏–¥–∞ `-1234567890`
   - –°—É–ø–µ—Ä–≥—Ä—É–ø–ø—ã: ID –≤–∏–¥–∞ `-1001234567890`

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
docker compose -f docker/docker-compose.prod.yml exec telegram_repair_bot_prod python /app/scripts/check_masters_groups.py
```

–î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```
–°–¢–ê–¢–ò–°–¢–ò–ö–ê:
   [+] –ú–∞—Å—Ç–µ—Ä–æ–≤ —Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –≥—Ä—É–ø–ø–æ–π: X
   [!] –ú–∞—Å—Ç–µ—Ä–æ–≤ –ë–ï–ó –≥—Ä—É–ø–ø—ã: 0
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—Å–µ—Ö –≥—Ä—É–ø–ø:

1. **–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞—è–≤–∫—É**
   - –ó–∞–π–¥–∏—Ç–µ –∫–∞–∫ –¥–∏—Å–ø–µ—Ç—á–µ—Ä
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –∑–∞—è–≤–∫—É

2. **–ù–∞–∑–Ω–∞—á—å—Ç–µ –Ω–∞ –º–∞—Å—Ç–µ—Ä–∞**
   - –í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Å—Ç–µ—Ä–∞ –¥–ª—è –∑–∞—è–≤–∫–∏

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ**
   - –ú–∞—Å—Ç–µ—Ä –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ —Ä–∞–±–æ—á—É—é –≥—Ä—É–ø–ø—É
   - –í –ª–æ–≥–∞—Ö –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "ASSIGNMENT BLOCKED"

## –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### –ü–æ—á–µ–º—É –≥—Ä—É–ø–ø—ã —Å–±—Ä–æ—Å–∏–ª–∏—Å—å?

–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
- –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (dev –≤–º–µ—Å—Ç–æ prod)
- –†—É—á–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –ù—É–∂–Ω–∞ –ª–∏ –æ—Ç–¥–µ–ª—å–Ω–∞—è –≥—Ä—É–ø–ø–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–∞—Å—Ç–µ—Ä–∞?

**–î–∞!** –ö–∞–∂–¥–æ–º—É –º–∞—Å—Ç–µ—Ä—É –Ω—É–∂–Ω–∞ —Å–≤–æ—è —Ä–∞–±–æ—á–∞—è –≥—Ä—É–ø–ø–∞, —Ç–∞–∫ –∫–∞–∫:
- –ö–∞–∂–¥—ã–π –º–∞—Å—Ç–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–∏ –∑–∞—è–≤–∫–∏
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ú–æ–∂–µ—Ç –ª–∏ –±—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∞—Å—Ç–µ—Ä–æ–≤ –≤ –æ–¥–Ω–æ–π –≥—Ä—É–ø–ø–µ?

–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –¥–∞, –Ω–æ **–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è**:
- –í—Å–µ –º–∞—Å—Ç–µ—Ä–∞ –≤ –≥—Ä—É–ø–ø–µ –±—É–¥—É—Ç –≤–∏–¥–µ—Ç—å —á—É–∂–∏–µ –∑–∞—è–≤–∫–∏
- –£—Å–ª–æ–∂–Ω—è–µ—Ç—Å—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- –†–∏—Å–∫ –ø—É—Ç–∞–Ω–∏—Ü—ã

### –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –±–æ—Ç –Ω–µ –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—É?

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –ë–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –≥—Ä—É–ø–ø—É
2. –ë–æ—Ç —è–≤–ª—è–µ—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º (–∏–ª–∏ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–æ –ø–∏—Å–∞—Ç—å)
3. ID –≥—Ä—É–ø–ø—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π (–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π)
4. –ì—Ä—É–ø–ø–∞ –Ω–µ —É–¥–∞–ª–µ–Ω–∞

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker compose -f docker/docker-compose.prod.yml logs --tail=100 telegram_repair_bot_prod`
2. –°–æ–∑–¥–∞–π—Ç–µ issue —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã –∏ –ª–æ–≥–∞–º–∏
