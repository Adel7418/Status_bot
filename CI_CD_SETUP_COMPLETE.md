# ‚úÖ CI/CD Pipeline - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!

**–î–∞—Ç–∞:** 19 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ê–ë–û–¢–ê–ï–¢

---

## üéâ –ß—Ç–æ —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ

### ‚úÖ Pre-commit hooks (–ª–æ–∫–∞–ª—å–Ω–æ)
- Ruff linter + formatter ‚úÖ
- Trailing whitespace cleanup ‚úÖ
- Line endings fix (CRLF ‚Üí LF) ‚úÖ
- YAML/JSON/TOML validation ‚úÖ
- Bandit security scan ‚úÖ
- MyPy type checking ‚úÖ

### ‚úÖ GitHub Actions workflows
- `ci.yml` - —Ç–µ—Å—Ç—ã + –ª–∏–Ω—Ç–∏–Ω–≥ + security
- `deploy.yml` - –∞–≤—Ç–æ–¥–µ–ø–ª–æ–π –ø—Ä–∏ —Ä–µ–ª–∏–∑–∞—Ö
- `pr-checks.yml` - –ø—Ä–æ–≤–µ—Ä–∫–∏ PR
- `codeql.yml` - security scan

### ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- Dependabot - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- Auto-labeling - –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ PR
- Coverage tracking - –æ—Ç—á–µ—Ç—ã –æ –ø–æ–∫—Ä—ã—Ç–∏–∏

---

## üöÄ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

Pre-commit —Ç–æ–ª—å–∫–æ —á—Ç–æ:
- ‚úÖ –ò—Å–ø—Ä–∞–≤–∏–ª trailing whitespace –≤ 150+ —Ñ–∞–π–ª–∞—Ö
- ‚úÖ –ò—Å–ø—Ä–∞–≤–∏–ª EOF –≤ 150+ —Ñ–∞–π–ª–∞—Ö  
- ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–ª CRLF ‚Üí LF –≤–æ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö
- ‚úÖ –û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–ª 50 —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ Ruff

**–í—Å–µ —ç—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —É–∂–µ –≤ –≤–∞—à–µ–º —Ä–∞–±–æ—á–µ–º –∫–∞—Ç–∞–ª–æ–≥–µ!**

---

## üìù –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

### 1. –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è pre-commit

```bash
# Pre-commit –∏—Å–ø—Ä–∞–≤–∏–ª –º–Ω–æ–≥–æ —Ñ–∞–π–ª–æ–≤, –¥–∞–≤–∞–π—Ç–µ —ç—Ç–æ –∑–∞–∫–æ–º–º–∏—Ç–∏–º
git add -A
git commit -m "chore: apply pre-commit fixes (whitespace, EOF, line endings)"
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å pre-commit –¥–ª—è –±—É–¥—É—â–∏—Ö –∫–æ–º–º–∏—Ç–æ–≤

Pre-commit —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω! –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º commit –æ–Ω –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

### 3. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ù–∞—Å—Ç—Ä–æ–∏—Ç—å GitHub

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GitHub Actions:
1. Push –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ GitHub
2. Actions –∑–∞–ø—É—Å—Ç—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ secrets (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω –¥–µ–ø–ª–æ–π)

---

## üí° –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ü—Ä–∏ –æ–±—ã—á–Ω–æ–π —Ä–∞–±–æ—Ç–µ:

```bash
# 1. –†–∞–±–æ—Ç–∞–µ—Ç–µ –∫–∞–∫ –æ–±—ã—á–Ω–æ
# ... edit files ...

# 2. Commit (pre-commit –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!)
git commit -m "feat: add new feature"

# –ï—Å–ª–∏ pre-commit —á—Ç–æ-—Ç–æ –∏—Å–ø—Ä–∞–≤–∏–ª:
git add -A
git commit -m "feat: add new feature"

# 3. Push
git push
```

### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å pre-commit (—Ä–µ–¥–∫–æ!):

```bash
# –¢–æ–ª—å–∫–æ –≤ –∫—Ä–∞–π–Ω–µ–º —Å–ª—É—á–∞–µ!
git commit --no-verify -m "hotfix: urgent fix"
```

### –ó–∞–ø—É—Å—Ç–∏—Ç—å pre-commit –≤—Ä—É—á–Ω—É—é:

```bash
# –ù–∞ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö
pre-commit run --all-files

# –¢–æ–ª—å–∫–æ –±—ã—Å—Ç—Ä—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (–±–µ–∑ MyPy)
SKIP=mypy pre-commit run --all-files

# –¢–æ–ª—å–∫–æ Ruff
pre-commit run ruff --all-files
```

---

## üìä Ruff –Ω–∞—à–µ–ª 483 warning

–≠—Ç–æ –Ω–µ –æ—à–∏–±–∫–∏, –∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é –∫–æ–¥–∞:
- –£–ø—Ä–æ—â–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏–π (SIM118, SIM108)
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å —Ç–∏–ø–æ–≤ (UP007)
- –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (F841)
- Print statements –≤ demo/scripts (T201)

**–≠—Ç–æ –ù–ï –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É!** –ú–æ–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ.

### –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å warnings:

```bash
ruff check app/ --output-format=full
```

### –ö–∞–∫ –∞–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ:

```bash
ruff check app/ --fix
```

---

## ‚úÖ Checklist –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

- [x] Pre-commit —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [x] Pre-commit hooks —Ä–∞–±–æ—Ç–∞—é—Ç
- [x] –§–∞–π–ª—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- [x] GitHub Actions workflows —Å–æ–∑–¥–∞–Ω—ã
- [x] Dependabot –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã
- [ ] –ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø—É—à–µ–Ω—ã –≤ GitHub (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üéì –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à pre-commit
pre-commit clean

# –û–±–Ω–æ–≤–∏—Ç—å hooks –¥–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –≤–µ—Ä—Å–∏–π
pre-commit autoupdate

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π hook
pre-commit run ruff --all-files
pre-commit run ruff-format --all-files

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ hooks
pre-commit run --all-files --verbose

# –£–¥–∞–ª–∏—Ç—å pre-commit (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
pre-commit uninstall
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| `docs/CI_CD_GUIDE.md` | –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ (520 —Å—Ç—Ä–æ–∫) |
| `.pre-commit-config.yaml` | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è hooks |
| `.github/workflows/ci.yml` | CI pipeline |

---

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### Windows + bash hooks
Bash-–∫–æ–º–∞–Ω–¥—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ PowerShell, –ø–æ—ç—Ç–æ–º—É:
- ‚ùå check-pii-logging –æ—Ç–∫–ª—é—á–µ–Ω
- ‚ùå check-secrets –æ—Ç–∫–ª—é—á–µ–Ω
- ‚úÖ –í—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!

–≠—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ GitHub Actions CI.

### MyPy –º–µ–¥–ª–µ–Ω–Ω—ã–π
MyPy type checking –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–º. –ï—Å–ª–∏ –º–µ—à–∞–µ—Ç:
```bash
# –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å MyPy –ª–æ–∫–∞–ª—å–Ω–æ
SKIP=mypy git commit -m "fix: quick fix"
```

---

## üéâ –ò—Ç–æ–≥

**CI/CD Pipeline –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç!**

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è pre-commit
2. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–±–æ—Ç—É –∫–∞–∫ –æ–±—ã—á–Ω–æ
3. Pre-commit –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–í—Å—ë –≥–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ!** üöÄ

---

**–í–æ–ø—Ä–æ—Å—ã?** –°–º–æ—Ç—Ä–∏—Ç–µ `docs/CI_CD_GUIDE.md`

